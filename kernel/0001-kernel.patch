From 33b6abdf80d92c37f6beb6ec5e655b34a8900bb8 Mon Sep 17 00:00:00 2001
From: YouMeng <36076779@qq.com>
Date: Sun, 28 Jul 2024 22:55:19 +0800
Subject: [PATCH 1/4] =?UTF-8?q?=E5=AE=8C=E6=88=90=E5=B0=8F=E6=B5=B7?=
 =?UTF-8?q?=E8=B1=9A=E6=89=8B=E6=9C=BAV4.1=E7=89=88=E6=9C=AC=E7=A1=AC?=
 =?UTF-8?q?=E4=BB=B6=E9=A9=B1=E5=8A=A8=E9=80=82=E9=85=8D:=E6=8C=89?=
 =?UTF-8?q?=E9=94=AE=E3=80=81MPU6500=E3=80=81=E7=A3=81=E5=8A=9B=E8=AE=A1?=
 =?UTF-8?q?=E3=80=81CW2015=EF=BC=8C=E8=B0=83=E6=95=B4EC20=E7=94=B5?=
 =?UTF-8?q?=E6=BA=90=E6=8E=A7=E5=88=B6=E5=BC=95=E8=84=9A?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I49906d9e4f693577b8cecb689cddcf089113c04f
---
 .../dts/rockchip/tspi-rk3566-dsi-v10.dtsi     | 1504 +++--------------
 .../dts/rockchip/tspi-rk3566-user-v10.dts     |  128 +-
 arch/arm64/configs/rockchip_linux_defconfig   |  673 ++++++--
 arch/arm64/configs/tspi_defconfig             |    6 +-
 drivers/input/touchscreen/Kconfig             |    1 +
 drivers/input/touchscreen/Makefile            |    1 +
 .../input/touchscreen/cst128a_cust/Kconfig    |    7 +
 .../input/touchscreen/cst128a_cust/Makefile   |    1 +
 .../touchscreen/cst128a_cust/cst128a_ts.c     |  288 ++++
 drivers/power/supply/Kconfig                  |    2 +
 drivers/power/supply/Makefile                 |    1 +
 drivers/power/supply/ec20_power/Kconfig       |    7 +
 drivers/power/supply/ec20_power/Makefile      |    1 +
 drivers/power/supply/ec20_power/ec20_power.c  |  250 +++
 14 files changed, 1437 insertions(+), 1433 deletions(-)
 create mode 100644 drivers/input/touchscreen/cst128a_cust/Kconfig
 create mode 100644 drivers/input/touchscreen/cst128a_cust/Makefile
 create mode 100644 drivers/input/touchscreen/cst128a_cust/cst128a_ts.c
 create mode 100644 drivers/power/supply/ec20_power/Kconfig
 create mode 100644 drivers/power/supply/ec20_power/Makefile
 create mode 100644 drivers/power/supply/ec20_power/ec20_power.c

diff --git a/arch/arm64/boot/dts/rockchip/tspi-rk3566-dsi-v10.dtsi b/arch/arm64/boot/dts/rockchip/tspi-rk3566-dsi-v10.dtsi
index f358292624b2..6376a1db2582 100755
--- a/arch/arm64/boot/dts/rockchip/tspi-rk3566-dsi-v10.dtsi
+++ b/arch/arm64/boot/dts/rockchip/tspi-rk3566-dsi-v10.dtsi
@@ -1,1268 +1,236 @@
-// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
-/*
- * Copyright (c) 2020 Rockchip Electronics Co., Ltd.
- *
- */
-/*********************************************************************
- *           立创开发板不靠卖板赚钱，以培养中国工程师为己任          
- *         泰山派软硬件资料与相关扩展板软硬件资料官网全部开源		 
- *                      开发板官网：www.lckfb.com                    
- *                     立创论坛：oshwhub.com/forum                   
- *            关注B站：【立创开发板】，掌握我们的最新动态！          
- *********************************************************************
- * 文件名：tspi-rk3566-dsi-v10.dtsi
- * 描述：mipi 屏幕
- * 更新:
- * 时间          作者           联系           说明
- * 2023-07-21   吴才成    1378913492@qq.com   v1.0.0
- *********************************************************************/
-/ {
-	backlight: backlight {
-		compatible = "pwm-backlight";
-		pwms = <&pwm5 0 25000 0>;
-		brightness-levels = <
-			  0  20  20  21  21  22  22  23
-			 23  24  24  25  25  26  26  27
-			 27  28  28  29  29  30  30  31
-			 31  32  32  33  33  34  34  35
-			 35  36  36  37  37  38  38  39
-			 40  41  42  43  44  45  46  47
-			 48  49  50  51  52  53  54  55
-			 56  57  58  59  60  61  62  63
-			 64  65  66  67  68  69  70  71
-			 72  73  74  75  76  77  78  79
-			 80  81  82  83  84  85  86  87
-			 88  89  90  91  92  93  94  95
-			 96  97  98  99 100 101 102 103
-			104 105 106 107 108 109 110 111
-			112 113 114 115 116 117 118 119
-			120 121 122 123 124 125 126 127
-			128 129 130 131 132 133 134 135
-			136 137 138 139 140 141 142 143
-			144 145 146 147 148 149 150 151
-			152 153 154 155 156 157 158 159
-			160 161 162 163 164 165 166 167
-			168 169 170 171 172 173 174 175
-			176 177 178 179 180 181 182 183
-			184 185 186 187 188 189 190 191
-			192 193 194 195 196 197 198 199
-			200 201 202 203 204 205 206 207
-			208 209 210 211 212 213 214 215
-			216 217 218 219 220 221 222 223
-			224 225 226 227 228 229 230 231
-			232 233 234 235 236 237 238 239
-			240 241 242 243 244 245 246 247
-			248 249 250 251 252 253 254 255
-		>;
-		default-brightness-level = <255>;
-	};
-};
-
-&pwm5 {
-	status = "okay";
-};
-
-// &i2c1 {
-// 	status = "okay";
-// 	ts@5d {
-// 		compatible = "goodix,gt9xx";
-// 		reg = <0x5d>;
-// 		tp-size = <89>;
-// 		max-x = <1280>;
-// 		max-y = <800>;
-// 		touch-gpio = <&gpio1 RK_PA0 IRQ_TYPE_LEVEL_LOW>;
-// 		reset-gpio = <&gpio1 RK_PA1 IRQ_TYPE_LEVEL_LOW>;
-// 	};
-// };
-&i2c1 {
-	status = "okay";
-	ts@5d {
-		pinctrl-0 = <&touch_gpio>;
-		compatible = "goodix,gt9xx";
-		reg = <0x5d>;
-		tp-size = <970>;
-		max-x = <1080>;
-		max-y = <1920>;
-		touch-gpio = <&gpio1 RK_PA0 IRQ_TYPE_LEVEL_LOW>;
-		reset-gpio = <&gpio1 RK_PA1 GPIO_ACTIVE_HIGH>;
-	};
-};
-
-&pinctrl {
-	dsi1 {
-		dsi1_rst_gpio: dsi1-rst-gpio {
-			rockchip,pins = <3 RK_PC1 RK_FUNC_GPIO &pcfg_pull_none>;
-		};
-		touch_gpio: touch-gpio {
-			rockchip,pins = <1 RK_PA0 RK_FUNC_GPIO &pcfg_pull_up>;
-		};
-	};
-};
-
-/*
- * video_phy1 needs to be enabled
- * when dsi1 is enabled
- */
-&dsi1 {
-	status = "okay";
-};
-
-&dsi1_in_vp0 {
-	status = "disabled";
-};
-
-&dsi1_in_vp1 {
-	status = "okay";
-};
-
-&video_phy1 {
-	status = "okay";
-};
-
-&route_dsi1 {
-	status = "okay";//wucaicheng mipi okay
-	connect = <&vp1_out_dsi1>;
-};
-
-/************************************************************************************************************************************************
-10寸晶尚
-默认 8寸800x1280
-************************************************************************************************************************************************/
-// &dsi1 {
-// 	status = "okay";
-// 	rockchip,lane-rate = <480>;
-// 	dsi1_panel: panel@0 {
-// 		status = "okay";
-// 		compatible = "simple-panel-dsi";
-// 		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
-// 		pinctrl-names = "default";
-// 		pinctrl-0 = <&dsi1_rst_gpio>;
-// 		reg = <0>;
-// 		backlight = <&backlight>;
-// 		reset-delay-ms = <10>;
-// 		enable-delay-ms = <120>;
-// 		prepare-delay-ms = <20>;
-// 		unprepare-delay-ms = <20>;
-// 		disable-delay-ms = <50>;
-// 		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
-// 			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
-// 		dsi,format = <MIPI_DSI_FMT_RGB888>;
-// 		dsi,lanes  = <4>;
-// 		panel-init-sequence = [
-// 			15 00 02 E0 00
-// 			15 00 02 E1 93
-// 			15 00 02 E2 65
-// 			15 00 02 E3 F8
-// 			15 00 02 80 03
-// 			15 00 02 E0 01
-// 			15 00 02 00 00
-// 			15 00 02 01 3C
-// 			15 00 02 03 10
-// 			15 00 02 04 38
-// 			15 00 02 0C 74
-// 			15 00 02 17 00
-// 			15 00 02 18 E7
-// 			15 00 02 19 01
-// 			15 00 02 1A 00
-// 			15 00 02 1B E7
-// 			15 00 02 1C 01
-// 			15 00 02 24 FE
-// 			15 00 02 35 23
-// 			15 00 02 37 09
-// 			15 00 02 38 04
-// 			15 00 02 39 00
-// 			15 00 02 3A 01
-// 			15 00 02 3C 70
-// 			15 00 02 3D FF
-// 			15 00 02 3E FF
-// 			15 00 02 3F 7F
-// 			15 00 02 40 06
-// 			15 00 02 41 A0
-// 			15 00 02 43 1E
-// 			15 00 02 44 0B
-// 			15 00 02 45 28
-// 			15 00 02 55 02
-// 			15 00 02 57 A9
-// 			15 00 02 59 0A
-// 			15 00 02 5A 2D
-// 			15 00 02 5B 19
-// 			15 00 02 5C 15
-// 			15 00 02 5D 7F
-// 			15 00 02 5E 6E
-// 			15 00 02 5F 5F
-// 			15 00 02 60 53
-// 			15 00 02 61 50
-// 			15 00 02 62 41
-// 			15 00 02 63 44
-// 			15 00 02 64 2C
-// 			15 00 02 65 44
-// 			15 00 02 66 42
-// 			15 00 02 67 40
-// 			15 00 02 68 5B
-// 			15 00 02 69 45
-// 			15 00 02 6A 48
-// 			15 00 02 6B 38
-// 			15 00 02 6C 32
-// 			15 00 02 6D 25
-// 			15 00 02 6E 14
-// 			15 00 02 6F 08
-// 			15 00 02 70 7F
-// 			15 00 02 71 6E
-// 			15 00 02 72 5F
-// 			15 00 02 73 53
-// 			15 00 02 74 50
-// 			15 00 02 75 41
-// 			15 00 02 76 44
-// 			15 00 02 77 2C
-// 			15 00 02 78 44
-// 			15 00 02 79 42
-// 			15 00 02 7A 40
-// 			15 00 02 7B 5B
-// 			15 00 02 7C 45
-// 			15 00 02 7D 48
-// 			15 00 02 7E 38
-// 			15 00 02 7F 32
-// 			15 00 02 80 25
-// 			15 00 02 81 14
-// 			15 00 02 82 08
-// 			15 00 02 E0 02
-// 			15 00 02 00 50
-// 			15 00 02 01 5F
-// 			15 00 02 02 5F
-// 			15 00 02 03 52
-// 			15 00 02 04 77
-// 			15 00 02 05 57
-// 			15 00 02 06 5F
-// 			15 00 02 07 4E
-// 			15 00 02 08 4C
-// 			15 00 02 09 5F
-// 			15 00 02 0A 4A
-// 			15 00 02 0B 48
-// 			15 00 02 0C 5F
-// 			15 00 02 0D 46
-// 			15 00 02 0E 44
-// 			15 00 02 0F 40
-// 			15 00 02 10 5F
-// 			15 00 02 11 5F
-// 			15 00 02 12 5F
-// 			15 00 02 13 5F
-// 			15 00 02 14 5F
-// 			15 00 02 15 5F
-// 			15 00 02 16 51
-// 			15 00 02 17 5F
-// 			15 00 02 18 5F
-// 			15 00 02 19 53
-// 			15 00 02 1A 77
-// 			15 00 02 1B 57
-// 			15 00 02 1C 5F
-// 			15 00 02 1D 4F
-// 			15 00 02 1E 4D
-// 			15 00 02 1F 5F
-// 			15 00 02 20 4B
-// 			15 00 02 21 49
-// 			15 00 02 22 5F
-// 			15 00 02 23 47
-// 			15 00 02 24 45
-// 			15 00 02 25 41
-// 			15 00 02 26 5F
-// 			15 00 02 27 5F
-// 			15 00 02 28 5F
-// 			15 00 02 29 5F
-// 			15 00 02 2A 5F
-// 			15 00 02 2B 5F
-// 			15 00 02 2C 01
-// 			15 00 02 2D 1F
-// 			15 00 02 2E 1F
-// 			15 00 02 2F 13
-// 			15 00 02 30 17
-// 			15 00 02 31 17
-// 			15 00 02 32 1F
-// 			15 00 02 33 0D
-// 			15 00 02 34 0F
-// 			15 00 02 35 1F
-// 			15 00 02 36 05
-// 			15 00 02 37 07
-// 			15 00 02 38 1F
-// 			15 00 02 39 09
-// 			15 00 02 3A 0B
-// 			15 00 02 3B 11
-// 			15 00 02 3C 1F
-// 			15 00 02 3D 1F
-// 			15 00 02 3E 1F
-// 			15 00 02 3F 1F
-// 			15 00 02 40 1F
-// 			15 00 02 41 1F
-// 			15 00 02 42 00
-// 			15 00 02 43 1F
-// 			15 00 02 44 1F
-// 			15 00 02 45 12
-// 			15 00 02 46 17
-// 			15 00 02 47 17
-// 			15 00 02 48 1F
-// 			15 00 02 49 0C
-// 			15 00 02 4A 0E
-// 			15 00 02 4B 1F
-// 			15 00 02 4C 04
-// 			15 00 02 4D 06
-// 			15 00 02 4E 1F
-// 			15 00 02 4F 08
-// 			15 00 02 50 0A
-// 			15 00 02 51 10
-// 			15 00 02 52 1F
-// 			15 00 02 53 1F
-// 			15 00 02 54 1F
-// 			15 00 02 55 1F
-// 			15 00 02 56 1F
-// 			15 00 02 57 1F
-// 			15 00 02 58 40
-// 			15 00 02 5B 10
-// 			15 00 02 5C 06
-// 			15 00 02 5D 40
-// 			15 00 02 5E 00
-// 			15 00 02 5F 00
-// 			15 00 02 60 40
-// 			15 00 02 61 03
-// 			15 00 02 62 04
-// 			15 00 02 63 6C
-// 			15 00 02 64 6C
-// 			15 00 02 65 75
-// 			15 00 02 66 08
-// 			15 00 02 67 B4
-// 			15 00 02 68 08
-// 			15 00 02 69 6C
-// 			15 00 02 6A 6C
-// 			15 00 02 6B 0C
-// 			15 00 02 6D 00
-// 			15 00 02 6E 00
-// 			15 00 02 6F 88
-// 			15 00 02 75 BB
-// 			15 00 02 76 00
-// 			15 00 02 77 05
-// 			15 00 02 78 2A
-// 			15 00 02 E0 04
-// 			15 00 02 00 0E
-// 			15 00 02 02 B3
-// 			15 00 02 09 60
-// 			15 00 02 0E 48
-// 			15 00 02 E0 00
-// 			05 fa 01 11
-// 			05 32 01 29
-// 		];
-
-// 		panel-exit-sequence = [
-// 			05 00 01 28
-// 			05 00 01 10
-// 		];
-
-// 		disp_timings1: display-timings {
-// 			native-mode = <&dsi1_timing0>;
-// 			dsi1_timing0: timing0 {
-// 				clock-frequency = <66000000>;
-// 				hactive = <800>;
-// 				vactive = <1280>;
-// 				hfront-porch = <18>;
-// 				hsync-len = <12>;
-// 				hback-porch = <18>;
-// 				vfront-porch = <24>;
-// 				vsync-len = <4>;
-// 				vback-porch = <12>;
-// 				hsync-active = <0>;
-// 				vsync-active = <0>;
-// 				de-active = <0>;
-// 				pixelclk-active = <1>;
-// 			};
-// 		};
-
-// 		ports {
-// 			#address-cells = <1>;
-// 			#size-cells = <0>;
-
-// 			port@0 {
-// 				reg = <0>;
-// 				panel_in_dsi1: endpoint {
-// 					remote-endpoint = <&dsi1_out_panel>;
-// 				};
-// 			};
-// 		};
-// 	};
-
-// 	ports {
-// 		#address-cells = <1>;
-// 		#size-cells = <0>;
-
-// 		port@1 {
-// 			reg = <1>;
-// 			dsi1_out_panel: endpoint {
-// 				remote-endpoint = <&panel_in_dsi1>;
-// 			};
-// 		};
-// 	};
-
-// };
-
-/************************************************************************************************************************************************
-10寸晶尚
-默认 10.1寸1200x1920
-************************************************************************************************************************************************/
-// &dsi1 {
-// 	status = "okay";
-// 	rockchip,lane-rate = <1000>;
-// 	dsi1_panel: panel@0 {
-// 		status = "okay";
-// 		compatible = "simple-panel-dsi";
-// 		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
-// 		pinctrl-names = "default";
-// 		pinctrl-0 = <&dsi1_rst_gpio>;
-// 		reg = <0>;
-// 		backlight = <&backlight>;
-// 		reset-delay-ms = <100>;
-// 		enable-delay-ms = <120>;
-// 		prepare-delay-ms = <20>;
-// 		unprepare-delay-ms = <20>;
-// 		disable-delay-ms = <100>;
-// 		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
-// 			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
-// 		dsi,format = <MIPI_DSI_FMT_RGB888>;
-// 		dsi,lanes  = <4>;
-// 		panel-init-sequence = [
-// 			15 00 02 B0 01
-// 			15 00 02 C3 4F
-// 			15 00 02 C4 40
-// 			15 00 02 C5 40
-// 			15 00 02 C6 40
-// 			15 00 02 C7 40
-// 			15 00 02 C8 4D
-// 			15 00 02 C9 52
-// 			15 00 02 CA 51
-// 			15 00 02 CD 5D
-// 			15 00 02 CE 5B
-// 			15 00 02 CF 4B
-// 			15 00 02 D0 49
-// 			15 00 02 D1 47
-// 			15 00 02 D2 45
-// 			15 00 02 D3 41
-// 			15 00 02 D7 50
-// 			15 00 02 D8 40
-// 			15 00 02 D9 40
-// 			15 00 02 DA 40
-// 			15 00 02 DB 40
-// 			15 00 02 DC 4E
-// 			15 00 02 DD 52
-// 			15 00 02 DE 51
-// 			15 00 02 E1 5E
-// 			15 00 02 E2 5C
-// 			15 00 02 E3 4C
-// 			15 00 02 E4 4A
-// 			15 00 02 E5 48
-// 			15 00 02 E6 46
-// 			15 00 02 E7 42
-// 			15 00 02 B0 03
-// 			15 00 02 BE 03
-// 			15 00 02 CC 44
-// 			15 00 02 C8 07
-// 			15 00 02 C9 05
-// 			15 00 02 CA 42
-// 			15 00 02 CD 3E
-// 			15 00 02 CF 60
-// 			15 00 02 D2 04
-// 			15 00 02 D3 04
-// 			15 00 02 D4 01
-// 			15 00 02 D5 00
-// 			15 00 02 D6 03
-// 			15 00 02 D7 04
-// 			15 00 02 D9 01
-// 			15 00 02 DB 01
-// 			15 00 02 E4 F0
-// 			15 00 02 E5 0A
-// 			15 00 02 B0 00
-// 			15 00 02 B1 08
-// 			15 00 02 BD 54
-// 			15 00 02 C2 06
-// 			15 00 02 C4 0B
-// 			15 00 02 B0 02
-// 			15 00 02 C0 00
-// 			15 00 02 C1 0A
-// 			15 00 02 C2 20
-// 			15 00 02 C3 24
-// 			15 00 02 C4 23
-// 			15 00 02 C5 29
-// 			15 00 02 C6 23
-// 			15 00 02 C7 1C
-// 			15 00 02 C8 19
-// 			15 00 02 C9 17
-// 			15 00 02 CA 17
-// 			15 00 02 CB 18
-// 			15 00 02 CC 1A
-// 			15 00 02 CD 1E
-// 			15 00 02 CE 20
-// 			15 00 02 CF 23
-// 			15 00 02 D0 07
-// 			15 00 02 D1 00
-// 			15 00 02 D2 00
-// 			15 00 02 D3 0A
-// 			15 00 02 D4 13
-// 			15 00 02 D5 1C
-// 			15 00 02 D6 1A
-// 			15 00 02 D7 13
-// 			15 00 02 D8 17
-// 			15 00 02 D9 1C
-// 			15 00 02 DA 19
-// 			15 00 02 DB 17
-// 			15 00 02 DC 17
-// 			15 00 02 DD 18
-// 			15 00 02 DE 1A
-// 			15 00 02 DF 1E
-// 			15 00 02 E0 20
-// 			15 00 02 E1 23
-// 			15 00 02 E2 07
-// 			05 78 01 11
-// 			05 14 01 29
-// 		];
-
-// 		panel-exit-sequence = [
-// 			05 00 01 28
-// 			05 00 01 10
-// 		];
-
-// 		disp_timings1: display-timings {
-// 			native-mode = <&dsi1_timing0>;
-// 			dsi1_timing0: timing0 {
-// 				clock-frequency = <156000000>;
-// 				hactive = <1200 >;
-// 				vactive = <1920>;
-// 				hfront-porch = <42>;
-// 				hsync-len = <10>;
-// 				hback-porch = <32>;
-// 				vfront-porch = <35>;
-// 				vsync-len = <4>;
-// 				vback-porch = <30>;
-// 				hsync-active = <0>;
-// 				vsync-active = <0>;
-// 				de-active = <0>;
-// 				pixelclk-active = <0>;
-// 			};
-// 		};
-
-// 		ports {
-// 			#address-cells = <1>;
-// 			#size-cells = <0>;
-
-// 			port@0 {
-// 				reg = <0>;
-// 				panel_in_dsi1: endpoint {
-// 					remote-endpoint = <&dsi1_out_panel>;
-// 				};
-// 			};
-// 		};
-// 	};
-
-// 	ports {
-// 		#address-cells = <1>;
-// 		#size-cells = <0>;
-
-// 		port@1 {
-// 			reg = <1>;
-// 			dsi1_out_panel: endpoint {
-// 				remote-endpoint = <&panel_in_dsi1>;
-// 			};
-// 		};
-// 	};
-
-// };
-
-// /************************************************************************************************************************************************
-// 10寸晶尚
-// 默认 8寸800x1280
-// ************************************************************************************************************************************************/
-// &dsi1 {
-// 	status = "okay";
-// 	rockchip,lane-rate = <500>;
-// 	dsi1_panel: panel@0 {
-// 		status = "okay";
-// 		compatible = "simple-panel-dsi";
-// 		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
-// 		pinctrl-names = "default";
-// 		pinctrl-0 = <&dsi1_rst_gpio>;
-// 		reg = <0>;
-// 		backlight = <&backlight>;
-// 		reset-delay-ms = <30>;
-// 		enable-delay-ms = <100>;
-// 		prepare-delay-ms = <20>;
-// 		unprepare-delay-ms = <20>;
-// 		disable-delay-ms = <20>;
-// 		init-delay-ms = <10>;
-// 		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
-// 			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
-// 		dsi,format = <MIPI_DSI_FMT_RGB888>;
-// 		dsi,lanes  = <4>;
-// 		panel-init-sequence = [
-// 			39 00 04 FF 98 81 03
-// 			15 00 02 01 00
-// 			15 00 02 02 00
-// 			15 00 02 03 53    
-// 			15 00 02 04 53    
-// 			15 00 02 05 13
-// 			15 00 02 06 04
-// 			15 00 02 07 02
-// 			15 00 02 08 02
-// 			15 00 02 09 00
-// 			15 00 02 0a 00
-// 			15 00 02 0b 00
-// 			15 00 02 0c 00
-// 			15 00 02 0d 00
-// 			15 00 02 0e 00
-// 			15 00 02 0f 00
-// 			15 00 02 10 00
-// 			15 00 02 11 00
-// 			15 00 02 12 00
-// 			15 00 02 13 00
-// 			15 00 02 14 00
-// 			15 00 02 15 00
-// 			15 00 02 16 00
-// 			15 00 02 17 00
-// 			15 00 02 18 00
-// 			15 00 02 19 00
-// 			15 00 02 1a 00
-// 			15 00 02 1b 00
-// 			15 00 02 1c 00
-// 			15 00 02 1d 00
-// 			15 00 02 1e c0
-// 			15 00 02 1f 00
-// 			15 00 02 20 02
-// 			15 00 02 21 09
-// 			15 00 02 22 00
-// 			15 00 02 23 00
-// 			15 00 02 24 00
-// 			15 00 02 25 00
-// 			15 00 02 26 00
-// 			15 00 02 27 00
-// 			15 00 02 28 55
-// 			15 00 02 29 03
-// 			15 00 02 2a 00
-// 			15 00 02 2b 00
-// 			15 00 02 2c 00
-// 			15 00 02 2d 00
-// 			15 00 02 2e 00
-// 			15 00 02 2f 00
-// 			15 00 02 30 00
-// 			15 00 02 31 00
-// 			15 00 02 32 00
-// 			15 00 02 33 00
-// 			15 00 02 34 00
-// 			15 00 02 35 00
-// 			15 00 02 36 00
-// 			15 00 02 37 00
-// 			15 00 02 38 3C
-// 			15 00 02 39 00
-// 			15 00 02 3a 00
-// 			15 00 02 3b 00
-// 			15 00 02 3c 00
-// 			15 00 02 3d 00
-// 			15 00 02 3e 00
-// 			15 00 02 3f 00
-// 			15 00 02 40 00
-// 			15 00 02 41 00
-// 			15 00 02 42 00
-// 			15 00 02 43 00
-// 			15 00 02 44 00
-			
-// 			15 00 02 50 01
-// 			15 00 02 51 23
-// 			15 00 02 52 45
-// 			15 00 02 53 67
-// 			15 00 02 54 89
-// 			15 00 02 55 ab
-// 			15 00 02 56 01
-// 			15 00 02 57 23
-// 			15 00 02 58 45
-// 			15 00 02 59 67
-// 			15 00 02 5a 89
-// 			15 00 02 5b ab
-// 			15 00 02 5c cd
-// 			15 00 02 5d ef
-
-// 			15 00 02 5e 01
-// 			15 00 02 5f 0A    
-// 			15 00 02 60 02    
-// 			15 00 02 61 02    
-// 			15 00 02 62 08    
-// 			15 00 02 63 15    
-// 			15 00 02 64 14    
-// 			15 00 02 65 02    
-// 			15 00 02 66 11    
-// 			15 00 02 67 10    
-// 			15 00 02 68 02    
-// 			15 00 02 69 0F    
-// 			15 00 02 6a 0E    
-// 			15 00 02 6b 02    
-// 			15 00 02 6c 0D    
-// 			15 00 02 6d 0C    
-// 			15 00 02 6e 06    
-// 			15 00 02 6f 02    
-// 			15 00 02 70 02    
-// 			15 00 02 71 02    
-// 			15 00 02 72 02    
-// 			15 00 02 73 02    
-// 			15 00 02 74 02    
-			
-// 			15 00 02 75 0A    
-// 			15 00 02 76 02    
-// 			15 00 02 77 02    
-// 			15 00 02 78 06    
-// 			15 00 02 79 15    
-// 			15 00 02 7a 14    
-// 			15 00 02 7b 02    
-// 			15 00 02 7c 10    
-// 			15 00 02 7d 11    
-// 			15 00 02 7e 02    
-// 			15 00 02 7f 0C    
-// 			15 00 02 80 0D    
-// 			15 00 02 81 02    
-// 			15 00 02 82 0E    
-// 			15 00 02 83 0F    
-// 			15 00 02 84 08    
-// 			15 00 02 85 02    
-// 			15 00 02 86 02    
-// 			15 00 02 87 02    
-// 			15 00 02 88 02    
-// 			15 00 02 89 02    
-// 			15 00 02 8A 02    
-
-
-// 			39 00 04 FF 98 81 04
-// 			//15 00 02 00 00  //
-// 			// 15 00 02 2F 01   //bist 用户调试，屏幕会闪演示测试
-// 			15 00 02 3B C0  
-// 			15 00 02 6C 15
-// 			15 00 02 6E 30  
-// 			15 00 02 6F 55  
-// 			15 00 02 3A 24
-// 			15 00 02 8D 1F
-// 			15 00 02 87 BA
-// 			15 00 02 26 76
-// 			15 00 02 B2 D1
-// 			15 00 02 B5 07
-// 			15 00 02 35 1F
-// 			15 00 02 88 0B
-// 			15 00 02 21 09
-
-
-// 			39 00 04 FF 98 81 01
-// 			15 00 02 22 0A
-// 			15 00 02 31 09
-// 			15 00 02 40 33
-// 			15 00 02 53 37
-// 			15 00 02 55 38
-// 			15 00 02 50 95
-// 			15 00 02 51 95
-// 			15 00 02 60 30
-
-// 			15 00 02 A0 0F        
-// 			15 00 02 A1 17        
-// 			15 00 02 A2 22        
-// 			15 00 02 A3 19        
-// 			15 00 02 A4 15        
-// 			15 00 02 A5 28        
-// 			15 00 02 A6 1C        
-// 			15 00 02 A7 1C        
-// 			15 00 02 A8 78        
-// 			15 00 02 A9 1C        
-// 			15 00 02 AA 28        
-// 			15 00 02 AB 69        
-// 			15 00 02 AC 1A        
-// 			15 00 02 AD 19        
-// 			15 00 02 AE 4B        
-// 			15 00 02 AF 22        
-// 			15 00 02 B0 2A        
-// 			15 00 02 B1 4B        
-// 			15 00 02 B2 6B        
-// 			15 00 02 B3 3F        
-
-// 			15 00 02 C0 01        
-// 			15 00 02 C1 17        
-// 			15 00 02 C2 22        
-// 			15 00 02 C3 19        
-// 			15 00 02 C4 15        
-// 			15 00 02 C5 28        
-// 			15 00 02 C6 1C        
-// 			15 00 02 C7 1D        
-// 			15 00 02 C8 78        
-// 			15 00 02 C9 1C        
-// 			15 00 02 CA 28        
-// 			15 00 02 CB 69        
-// 			15 00 02 CC 1A        
-// 			15 00 02 CD 19        
-// 			15 00 02 CE 4B        
-// 			15 00 02 CF 22        
-// 			15 00 02 D0 2A        
-// 			15 00 02 D1 4B        
-// 			15 00 02 D2 6B        
-// 			15 00 02 D3 3F        
-// 			39 00 04 FF 98 81 00		
-// 			05 78 01 11
-// 			05 14 01 29
-// 		];
-
-// 		panel-exit-sequence = [
-// 			05 00 01 28
-// 			05 00 01 10
-// 		];
-
-// 		disp_timings1: display-timings {
-// 			native-mode = <&dsi1_timing0>;
-// 			dsi1_timing0: timing0 {
-// 				clock-frequency = <71000000>;
-// 				hactive = <800>;
-// 				vactive = <1280>;
-// 				hfront-porch = <52>;
-// 				hsync-len = <8>;
-// 				hback-porch = <48>;
-// 				vfront-porch = <15>;
-// 				vsync-len = <6>;
-// 				vback-porch = <16>;
-// 				hsync-active = <0>;
-// 				vsync-active = <0>;
-// 				de-active = <0>;
-// 				pixelclk-active = <0>;
-// 			};
-// 		};
-
-// 		ports {
-// 			#address-cells = <1>;
-// 			#size-cells = <0>;
-
-// 			port@0 {
-// 				reg = <0>;
-// 				panel_in_dsi1: endpoint {
-// 					remote-endpoint = <&dsi1_out_panel>;
-// 				};
-// 			};
-// 		};
-// 	};
-
-// 	ports {
-// 		#address-cells = <1>;
-// 		#size-cells = <0>;
-
-// 		port@1 {
-// 			reg = <1>;
-// 			dsi1_out_panel: endpoint {
-// 				remote-endpoint = <&panel_in_dsi1>;
-// 			};
-// 		};
-// 	};
-
-// };
-
-// /************************************************************************************************************************************************
-// 贝力佳屏幕
-// 默认 8寸800x1280
-// ************************************************************************************************************************************************/
-// &dsi1 {
-// 	status = "okay";
-// 	rockchip,lane-rate = <500>;
-// 	dsi1_panel: panel@0 {
-// 		status = "okay";
-// 		compatible = "simple-panel-dsi";
-// 		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
-// 		pinctrl-names = "default";
-// 		pinctrl-0 = <&dsi1_rst_gpio>;
-// 		reg = <0>;
-// 		backlight = <&backlight>;
-// 		reset-delay-ms = <30>;
-// 		enable-delay-ms = <100>;
-// 		prepare-delay-ms = <20>;
-// 		unprepare-delay-ms = <20>;
-// 		disable-delay-ms = <20>;
-// 		init-delay-ms = <10>;
-// 		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
-// 			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
-// 		dsi,format = <MIPI_DSI_FMT_RGB888>;
-// 		dsi,lanes  = <4>;
-// 		panel-init-sequence = [
-// 			39 00 04 FF 98 81 03     
-// 			15 00 02 01 00
-// 			15 00 02 02 00
-// 			15 00 02 03 53
-// 			15 00 02 04 13
-// 			15 00 02 05 00
-// 			15 00 02 06 04
-// 			15 00 02 07 00
-// 			15 00 02 08 00
-// 			15 00 02 09 22
-// 			15 00 02 0a 22
-// 			15 00 02 0b 00
-// 			15 00 02 0c 01
-// 			15 00 02 0d 00
-// 			15 00 02 0e 00
-// 			15 00 02 0f 25
-// 			15 00 02 10 25
-// 			15 00 02 11 00
-// 			15 00 02 12 00
-// 			15 00 02 13 00
-// 			15 00 02 14 00
-// 			15 00 02 15 00
-// 			15 00 02 16 00
-// 			15 00 02 17 00
-// 			15 00 02 18 00
-// 			15 00 02 19 00
-// 			15 00 02 1a 00
-// 			15 00 02 1b 00
-// 			15 00 02 1c 00
-// 			15 00 02 1d 00
-// 			15 00 02 1e 44
-// 			15 00 02 1f 80
-// 			15 00 02 20 02
-// 			15 00 02 21 03
-// 			15 00 02 22 00
-// 			15 00 02 23 00
-// 			15 00 02 24 00
-// 			15 00 02 25 00
-// 			15 00 02 26 00
-// 			15 00 02 27 00
-// 			15 00 02 28 33
-// 			15 00 02 29 03
-// 			15 00 02 2a 00
-// 			15 00 02 2b 00
-// 			15 00 02 2c 00
-// 			15 00 02 2d 00
-// 			15 00 02 2e 00
-// 			15 00 02 2f 00
-// 			15 00 02 30 00
-// 			15 00 02 31 00
-// 			15 00 02 32 00
-// 			15 00 02 33 00
-// 			15 00 02 34 04
-// 			15 00 02 35 00
-// 			15 00 02 36 00
-// 			15 00 02 37 00
-// 			15 00 02 38 3C
-// 			15 00 02 39 00
-// 			15 00 02 3a 40
-// 			15 00 02 3b 40
-// 			15 00 02 3c 00
-// 			15 00 02 3d 00
-// 			15 00 02 3e 00
-// 			15 00 02 3f 00
-// 			15 00 02 40 00
-// 			15 00 02 41 00
-// 			15 00 02 42 00
-// 			15 00 02 43 00
-// 			15 00 02 44 00
-							
-// 			15 00 02 50 01
-// 			15 00 02 51 23
-// 			15 00 02 52 45
-// 			15 00 02 53 67
-// 			15 00 02 54 89
-// 			15 00 02 55 ab
-// 			15 00 02 56 01
-// 			15 00 02 57 23
-// 			15 00 02 58 45
-// 			15 00 02 59 67
-// 			15 00 02 5a 89
-// 			15 00 02 5b ab
-// 			15 00 02 5c cd
-// 			15 00 02 5d ef
-							
-// 			15 00 02 5e 11
-
-// 			15 00 02 5f 01
-// 			15 00 02 60 00
-// 			15 00 02 61 15
-// 			15 00 02 62 14
-// 			15 00 02 63 0C
-// 			15 00 02 64 0D
-// 			15 00 02 65 0E
-// 			15 00 02 66 0F
-// 			15 00 02 67 06
-// 			15 00 02 68 02
-// 			15 00 02 69 02
-// 			15 00 02 6a 02
-// 			15 00 02 6b 02
-// 			15 00 02 6c 02
-// 			15 00 02 6d 02
-// 			15 00 02 6e 08
-// 			15 00 02 6f 02
-// 			15 00 02 70 02
-// 			15 00 02 71 02
-// 			15 00 02 72 02
-// 			15 00 02 73 02
-// 			15 00 02 74 02
-														
-// 			15 00 02 75 01
-// 			15 00 02 76 00
-// 			15 00 02 77 15
-// 			15 00 02 78 14
-// 			15 00 02 79 0C
-// 			15 00 02 7a 0D
-// 			15 00 02 7b 0E
-// 			15 00 02 7c 0F
-// 			15 00 02 7D 08
-// 			15 00 02 7E 02
-// 			15 00 02 7F 02
-// 			15 00 02 80 02
-// 			15 00 02 81 02
-// 			15 00 02 82 02
-// 			15 00 02 83 02
-// 			15 00 02 84 06
-// 			15 00 02 85 02
-// 			15 00 02 86 02
-// 			15 00 02 87 02
-// 			15 00 02 88 02
-// 			15 00 02 89 02
-// 			15 00 02 8A 02
-
-// 			39 00 04 FF 98 81 04
-// 			15 00 02 6C 15
-// 			15 00 02 6E 3B
-// 			15 00 02 6F 55
-// 			//       15 00 02 3A 14
-// 			15 00 02 8D 14
-// 			15 00 02 87 BA
-// 			15 00 02 26 76
-// 			15 00 02 B2 D1
-// 			15 00 02 3B 98
-// 			15 00 02 35 1f
-// 			15 00 02 3A 24
-// 			15 00 02 B5 27
-// 			15 00 02 31 75
-// 			15 00 02 30 03
-// 			15 00 02 33 14
-// 			15 00 02 38 02
-// 			15 00 02 39 00
-// 			15 00 02 7A 10
-
-// 			// 15 00 02 2F 01     //开bist模式 检测gIP和ic有没有问题
-
-// 			39 00 04 FF 98 81 01
-// 			15 00 02 22 0A
-// 			15 00 02 31 0A
-// 			15 00 02 50 AE
-// 			15 00 02 51 A9
-// 			15 00 02 60 1F
-// 			15 00 02 62 07
-// 			15 00 02 63 00
-
-// 			15 00 02 52 00
-// 			15 00 02 53 56
-// 			15 00 02 54 00
-// 			15 00 02 55 59
-
-// 			15 00 02 A0 08
-// 			15 00 02 A1 20
-// 			15 00 02 A2 2D
-// 			15 00 02 A3 13
-// 			15 00 02 A4 16
-// 			15 00 02 A5 29
-// 			15 00 02 A6 1D
-// 			15 00 02 A7 1E
-// 			15 00 02 A8 77
-// 			15 00 02 A9 17
-// 			15 00 02 AA 24
-// 			15 00 02 AB 6A
-// 			15 00 02 AC 22
-// 			15 00 02 AD 24
-// 			15 00 02 AE 5A
-// 			15 00 02 AF 2B
-// 			15 00 02 B0 2C
-// 			15 00 02 B1 4D
-// 			15 00 02 B2 6F
-// 			15 00 02 B3 3F
-
-// 			15 00 02 C0 08
-// 			15 00 02 C1 1E
-// 			15 00 02 C2 2B
-// 			15 00 02 C3 13
-// 			15 00 02 C4 16
-// 			15 00 02 C5 28
-// 			15 00 02 C6 1A
-// 			15 00 02 C7 1D
-// 			15 00 02 C8 75
-// 			15 00 02 C9 18
-// 			15 00 02 CA 25
-// 			15 00 02 CB 71
-// 			15 00 02 CC 23
-// 			15 00 02 CD 28
-// 			15 00 02 CE 59
-// 			15 00 02 CF 2C
-// 			15 00 02 D0 30
-// 			15 00 02 D1 55
-// 			15 00 02 D2 6B
-// 			15 00 02 D3 3F
-
-// 			//CMD_Page 0
-// 			39 00 04 FF 98 81 00
-// 			15 00 02 35 00 				      
-// 			05 78 01 11           
-// 			05 14 01 29
-// 		];
-
-// 		panel-exit-sequence = [
-// 			05 00 01 28
-// 			05 00 01 10
-// 		];
-
-// 		disp_timings1: display-timings {
-// 			native-mode = <&dsi1_timing0>;
-// 			dsi1_timing0: timing0 {
-// 				clock-frequency = <71000000>;
-// 				hactive = <800>;
-// 				vactive = <1280>;
-// 				hfront-porch = <52>;
-// 				hsync-len = <8>;
-// 				hback-porch = <48>;
-// 				vfront-porch = <15>;
-// 				vsync-len = <6>;
-// 				vback-porch = <16>;
-// 				hsync-active = <0>;
-// 				vsync-active = <0>;
-// 				de-active = <0>;
-// 				pixelclk-active = <0>;
-// 			};
-// 		};
-
-// 		ports {
-// 			#address-cells = <1>;
-// 			#size-cells = <0>;
-
-// 			port@0 {
-// 				reg = <0>;
-// 				panel_in_dsi1: endpoint {
-// 					remote-endpoint = <&dsi1_out_panel>;
-// 				};
-// 			};
-// 		};
-// 	};
-
-// 	ports {
-// 		#address-cells = <1>;
-// 		#size-cells = <0>;
-
-// 		port@1 {
-// 			reg = <1>;
-// 			dsi1_out_panel: endpoint {
-// 				remote-endpoint = <&panel_in_dsi1>;
-// 			};
-// 		};
-// 	};
-
-// };
-
-
-/************************************************************************************************************************************************
-贝力佳屏幕
-默认 5寸
-************************************************************************************************************************************************/
-&dsi1 {
-	status = "okay";
-	rockchip,lane-rate = <1000>;
-	dsi1_panel: panel@0 {
-		status = "okay";
-		compatible = "simple-panel-dsi";
-		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&dsi1_rst_gpio>;
-		reg = <0>;
-		backlight = <&backlight>;
-		reset-delay-ms = <30>;
-		enable-delay-ms = <100>;
-		prepare-delay-ms = <20>;
-		unprepare-delay-ms = <20>;
-		disable-delay-ms = <20>;
-		init-delay-ms = <120>;
-		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
-			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
-		dsi,format = <MIPI_DSI_FMT_RGB888>;
-		dsi,lanes  = <4>;
-		panel-init-sequence = [
-			// Set EXTC 
-			39 00 04 B9 FF 83 99 
-			// Set Power  
-			39 00 10 B1 02 04 6C 8C 01 32 33 11 11 53 48 01 73 02 02 
-			// Set Display 
-			39 00 0C B2 00 80 80 AE 05 07 5A 11 00 10 10 
-			// Set CYC
-			39 00 2D B4 00 FF 00 AC 00 9C 00 00 08 00 00 02 00 26 02 07 09 21 03 00 00 04 A4 88 00 AC 00 9C 00 00 08 00 00 02 00 24 02 07 09 00 00 04 A4 12      
-			// Set GIP_0
-			39 00 22 D3 00 00 00 00 00 00 00 00 32 10 05 00 05 00 00 00 00 00 00 00 00 00 00 01 00 07 07 03 00 00 00 05 40 
-			// Set GIP_1 
-			39 00 21 D5 00 00 00 01 02 03 00 00 00 00 19 00 18 00 20 21 00 18 00 00 00 00 00 00 00 00 31 31 30 30 2F 2F     		
-			// Set GIP_2 
-			39 00 21 D6 40 40 03 02 01 00 40 40 40 40 18 40 19 40 21 20 40 18 40 40 40 40 40 40 40 40 31 31 30 30 2F 2F 
-			// Set GIP_3_0
-			39 00 11 D8 28 02 00 2A 28 02 C0 2A 00 00 00 00 00 00 00 00      
-			// Set Bank 
-			39 00 02 BD 01 
-			// Set GIP_3_1 
-			39 00 11 D8 00 00 00 00 00 00 00 00 28 2A 00 2A 28 02 C0 2A 	
-			// Set Bank 
-			39 00 02 BD 02 
-			// Set GIP_3_2 
-			39 00 09 D8 28 2A 00 2A 28 02 C0 2A 
-			// Set Bank 
-			39 00 02 BD 00 
-			//Set VCOM 
-			39 00 03 B6 7D 7D 
-			//Set VREF
-			39 00 02 D2 33 
-			// Set Panel 
-			39 00 02 CC 08 
-			// Set GAMMA
-			39 00 37 E0 01 2E 38 31 6A 71 7B 76 78 7F 86 88 8E 90 98 9C 9D A7 A8 AB A7 A9 A8 59 52 5D 69 01 2E 38 31 6A 71 7B 76 78 7F 86 88 8E 90 98 9C 9D A7 A8 AB A7 A9 A8 59 52 5D 69 
-			// Checksum Enable
-			39 00 02 D0 39 
-			05 78 01 11           
-			05 14 01 29		
-		];
-
-		panel-exit-sequence = [
-			05 00 01 28
-			05 00 01 10
-		];
-
-		disp_timings1: display-timings {
-			native-mode = <&dsi1_timing0>;
-			dsi1_timing0: timing0 {
-				clock-frequency = <120000000>;
-				hactive = <1080>;   //与 LCDTiming.LCDH 对应
-				vactive = <1920>;   //与 LCDTiming.LCDV 对应
-				hfront-porch = <32>;   //与 LCDTiming.HFPD 对应 
-				hsync-len = <4>;   //与 LCDTiming.HSPW 对应
-				hback-porch = <32>;   //与 LCDTiming.HBPD 对应
-				vfront-porch = <9>;   //与 LCDTiming.VEPD 对应
-				vsync-len = <4>;   //与 LCDTiming.VsPW 对应
-				vback-porch = <3>;   //与 LCDTiming.VBPD 对应
-				hsync-active = <0>;
-				vsync-active = <0>;
-				de-active = <0>;
-				pixelclk-active = <0>;
-			};
-		};
-
-		ports {
-			#address-cells = <1>;
-			#size-cells = <0>;
-
-			port@0 {
-				reg = <0>;
-				panel_in_dsi1: endpoint {
-					remote-endpoint = <&dsi1_out_panel>;
-				};
-			};
-		};
-	};
-
-	ports {
-		#address-cells = <1>;
-		#size-cells = <0>;
-
-		port@1 {
-			reg = <1>;
-			dsi1_out_panel: endpoint {
-				remote-endpoint = <&panel_in_dsi1>;
-			};
-		};
-	};
-
-};
+/*********************************************************************
+ *           立创开发板不靠卖板赚钱，以培养中国工程师为己任  
+ *         泰山派软硬件资料与相关扩展板软硬件资料官网全部开源
+ *                      开发板官网：www.lckfb.com            
+ *                     立创论坛：oshwhub.com/forum           
+ *            关注B站：【立创开发板】，掌握我们的最新动态！  
+ *********************************************************************
+ * 文件名：tspi-rk3566-dsi-v10.dtsi
+ * 描述：mipi 屏幕
+ * 更新:
+ * 时间          作者           联系           说明
+ * 2023-09-13   吴才成    1378913492@qq.com   v1.0.0
+ * 2024-01-19   风漠兮    578118086@qq.com    Fit D310T9362V1
+ * 2024-06-08   千古长夜  36076779@qq.com     适配小海豚手机扩展版第二版，修改PWM输出为PWM6
+ *********************************************************************/
+/ {
+	backlight: backlight {
+		compatible = "pwm-backlight";
+		pwms = <&pwm6 0 25000 0>;
+		brightness-levels = <
+			  0  20  20  21  21  22  22  23
+			 23  24  24  25  25  26  26  27
+			 27  28  28  29  29  30  30  31
+			 31  32  32  33  33  34  34  35
+			 35  36  36  37  37  38  38  39
+			 40  41  42  43  44  45  46  47
+			 48  49  50  51  52  53  54  55
+			 56  57  58  59  60  61  62  63
+			 64  65  66  67  68  69  70  71
+			 72  73  74  75  76  77  78  79
+			 80  81  82  83  84  85  86  87
+			 88  89  90  91  92  93  94  95
+			 96  97  98  99 100 101 102 103
+			104 105 106 107 108 109 110 111
+			112 113 114 115 116 117 118 119
+			120 121 122 123 124 125 126 127
+			128 129 130 131 132 133 134 135
+			136 137 138 139 140 141 142 143
+			144 145 146 147 148 149 150 151
+			152 153 154 155 156 157 158 159
+			160 161 162 163 164 165 166 167
+			168 169 170 171 172 173 174 175
+			176 177 178 179 180 181 182 183
+			184 185 186 187 188 189 190 191
+			192 193 194 195 196 197 198 199
+			200 201 202 203 204 205 206 207
+			208 209 210 211 212 213 214 215
+			216 217 218 219 220 221 222 223
+			224 225 226 227 228 229 230 231
+			232 233 234 235 236 237 238 239
+			240 241 242 243 244 245 246 247
+			248 249 250 251 252 253 254 255
+		>;
+		default-brightness-level = <255>;
+	};
+};
+
+&pwm6 {
+	status = "okay";
+};
+
+&i2c1 {
+	status = "okay";
+	clock-frequency = <400000>;
+	
+	tp@38 {
+		status = "okay";
+		pinctrl-0 = <&touch_gpio>;
+		compatible = "hyn,cst128a";
+		reg = <0x38>;
+		reset-gpios = <&gpio1 RK_PA1 GPIO_ACTIVE_LOW>;
+		irq-gpios = <&gpio1 RK_PA0 IRQ_TYPE_LEVEL_LOW>;
+	};
+};
+
+
+&pinctrl {
+	dsi1 {
+		dsi1_rst_gpio: dsi1-rst-gpio {
+			rockchip,pins = <3 RK_PC1 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+		touch_gpio: touch-gpio {
+			rockchip,pins = <1 RK_PA0 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+	};
+};
+
+/*
+ * video_phy1 needs to be enabled
+ * when dsi1 is enabled
+ */
+&dsi1 {
+	status = "okay";
+};
+
+&dsi1_in_vp0 {
+	status = "disabled";
+};
+
+&dsi1_in_vp1 {
+	status = "okay";
+};
+
+&video_phy1 {
+	status = "okay";
+};
+
+&route_dsi1 {
+	status = "okay";//wucaicheng mipi okay
+	connect = <&vp1_out_dsi1>;
+};
+
+// D310T9362V1
+&dsi1 {
+	status = "okay";
+	rockchip,lane-rate = <480>;//(480+50+60+10)*(800+20+34+2)*60*3*8/2,+100mhz
+	dsi1_panel: panel@0 {
+		status = "okay";
+		compatible = "simple-panel-dsi";
+		reset-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_LOW>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&dsi1_rst_gpio>;
+		reg = <0>;
+		backlight = <&backlight>;
+		reset-delay-ms = <200>;
+		enable-delay-ms = <100>;
+		prepare-delay-ms = <20>;
+		unprepare-delay-ms = <20>;
+		disable-delay-ms = <20>;
+		init-delay-ms = <120>;
+		dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |
+			MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
+		dsi,format = <MIPI_DSI_FMT_RGB888>;
+		dsi,lanes  = <2>;
+		panel-init-sequence = [
+			// init code
+			05 78 01 01
+			05 78 01 11
+			39 0A 06 FF 77 01 00 00 11
+			15 0A 02 D1 11
+			15 0A 02 55 B0 // 80 90 b0
+			39 0A 06 FF 77 01 00 00 10
+			39 0A 03 C0 63 00
+			39 0A 03 C1 09 02
+			39 0A 03 C2 37 08
+			15 0A 02 C7 00 // x-dir rotate 0:0x00,rotate 180:0x04
+			15 0A 02 CC 38
+			39 0A 11 B0 00 11 19 0C 10 06 07 0A 09 22 04 10 0E 28 30 1C
+			39 6E 11 B1 00 12 19 0D 10 04 06 07 08 23 04 12 11 28 30 1C
+			39 0A 06 FF 77 01 00 00 11 // enable  bk fun of  command 2  BK1
+			15 0A 02 B0 4D
+			15 0A 02 B1 60 // 0x56  0x4a  0x5b
+			15 0A 02 B2 07
+			15 6E 02 B3 80
+			15 0A 02 B5 47
+			15 0A 02 B7 8A
+			15 0A 02 B8 21
+			15 0A 02 C1 78
+			15 0A 02 C2 78
+			15 0A 02 D0 88
+			39 0A 04 E0 00 00 02
+			39 0A 0C E1 01 A0 03 A0 02 A0 04 A0 00 44 44
+			39 0A 0D E2 00 00 00 00 00 00 00 00 00 00 00 00
+			39 0A 05 E3 00 00 33 33
+			39 0A 03 E4 44 44
+			39 0A 11 E5 01 26 A0 A0 03 28 A0 A0 05 2A A0 A0 07 2C A0 A0
+			39 0A 05 E6 00 00 33 33
+			39 0A 03 E7 44 44
+			39 0A 11 E8 02 26 A0 A0 04 28 A0 A0 06 2A A0 A0 08 2C A0 A0
+			39 0A 08 EB 00 01 E4 E4 44 00 40
+			39 0A 11 ED FF F7 65 4F 0B A1 CF FF FF FC 1A B0 F4 56 7F FF
+			15 0A 02 EE 42 // missing?
+			39 0A 06 FF 77 01 00 00 00
+			15 0A 02 36 00 //U&D  Y-DIR rotate 0:0x00,rotate 180:0x10
+			15 0A 02 3A 55
+			05 78 01 11           
+			05 14 01 29		
+		];
+
+		panel-exit-sequence = [
+			05 00 01 28
+			05 00 01 10
+		];
+
+		disp_timings1: display-timings {
+			native-mode = <&dsi1_timing0>;
+			dsi1_timing0: timing0 {
+				clock-frequency = <30816000>;// (480+50+60+10)*(800+20+34+2)*60
+
+				hactive = <480>;
+				hfront-porch = <50>;
+				hback-porch = <60>;
+				hsync-len = <10>;
+
+				vactive = <800>;
+				vfront-porch = <20>;
+				vback-porch = <34>;
+				vsync-len = <2>;
+
+				hsync-active = <0>;
+				vsync-active = <0>;
+				de-active = <0>;
+				pixelclk-active = <0>;
+
+				swap-rb = <0>;
+				swap-rg = <0>;
+				swap-gb = <0>;
+			};
+		};
+
+		ports {
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			port@0 {
+				reg = <0>;
+				panel_in_dsi1: endpoint {
+					remote-endpoint = <&dsi1_out_panel>;
+				};
+			};
+		};
+	};
+
+	ports {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		port@1 {
+			reg = <1>;
+			dsi1_out_panel: endpoint {
+				remote-endpoint = <&panel_in_dsi1>;
+			};
+		};
+	};
+
+};
\ No newline at end of file
diff --git a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
index bb7e7f13678c..bb08df745b3e 100755
--- a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
+++ b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
@@ -15,6 +15,7 @@
  * 更新:
  * 时间          作者           联系           说明
  * 2023-07-21   吴才成    1378913492@qq.com   v1.0.0
+ * 2024-05-13   千古长夜   36076779@qq.com     v2.0.0 添加4g模块电源开关
  *********************************************************************/
  
 /dts-v1/;
@@ -32,7 +33,7 @@
 // #include "tspi-rk3566-edp-v10.dtsi"
 
 //【开/关】mipi 显示屏幕配置，用户可以基于此复制自己的屏幕，注意EDP与MIPI屏幕互斥，因为共用了VOP如果需要同显自行修改
-// #include "tspi-rk3566-dsi-v10.dtsi"
+#include "tspi-rk3566-dsi-v10.dtsi"
 
 //【开/关】HDMI 显示屏幕配置，里面内容几乎可以不用动，如果不需要hdmi显示直接注释掉即可
 #include "tspi-rk3566-hdmi-v10.dtsi"
@@ -48,6 +49,13 @@
 	model = "lckfb tspi V10 Board";
 	compatible = "lckfb,tspi-v10", "rockchip,rk3566";
 
+	// 控制移远4EC20 4G模块电源开关
+	ec20_power:ec20_power {
+		compatible = "ec20_power";
+		ec20power-gpio = <&gpio4 RK_PA1 GPIO_ACTIVE_HIGH>;
+		status = "okay";	//“okay” 开启 “false” 关闭
+	};
+
 	rk_headset: rk-headset {
 		compatible = "rockchip_headset";
 		headset_gpio = <&gpio0 RK_PC5 GPIO_ACTIVE_HIGH>;
@@ -79,6 +87,37 @@
 			linux,blink-delay-off = <1500>;
 		};
 	};
+
+	gpio_keys: gpio-keys {
+		status = "okay";
+		compatible = "gpio-keys";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		autorepeat;
+
+		pinctrl-names = "default";
+		pinctrl-0 = <&pwr_key &volume_up_key &volume_down_key>;
+
+		power_key: power-key {
+			label = "GPIO Key Power";
+			gpios = <&gpio0 RK_PA5 GPIO_ACTIVE_LOW>;
+			linux,code = <KEY_POWER>;
+			debounce-interval = <100>;
+			wakeup-source;
+		};
+
+		volume_up: volume-up-key {
+			label = "GPIO Key Volume Up";
+			gpios = <&gpio0 RK_PC6 GPIO_ACTIVE_LOW>;
+			linux,code = <KEY_VOLUMEUP>;
+		};
+
+		volume_down: volume-down-key {
+			label = "GPIO Key Volume Down";
+			gpios = <&gpio0 RK_PC7 GPIO_ACTIVE_LOW>;
+			linux,code = <KEY_VOLUMEDOWN>;
+		};
+	};
 };
 
 &pinctrl {
@@ -88,6 +127,25 @@
 			rockchip,pins = <0 RK_PC5 RK_FUNC_GPIO &pcfg_pull_none>;
 		};
 	};
+	mpu6050 {
+		mpu6050_irq_gpio: mpu6050-irq-gpio {
+			rockchip,pins = <3 RK_PD7 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+	};
+
+	keys {
+		pwr_key: pwr-key {
+			rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+
+		volume_up_key: volume-up {
+			rockchip,pins = <0 RK_PC6 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+
+		volume_down_key: volume-down {
+			rockchip,pins = <0 RK_PC7 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+	};
 };
 
 //用户三色灯
@@ -107,6 +165,58 @@
 	pinctrl-0 = <&uart3m1_xfer>;
 };
 
+
+&i2c1 {
+	mpu6050_acc: mpu-acc@68 {
+		status = "okay";
+		compatible = "mpu6500_acc";
+		pinctrl-names = "default";
+		pinctrl-0 = <&mpu6050_irq_gpio>;
+		reg = <0x68>;
+		irq-gpio = <&gpio3 RK_PD7 IRQ_TYPE_EDGE_RISING>;
+		irq_enable = <0>;
+		poll_delay_ms = <30>;
+		type = <SENSOR_TYPE_ACCEL>;
+		layout = <5>;
+	};
+
+	mpu6050_gyro: mpu-gyro@68 {
+		status = "okay";
+		compatible = "mpu6500_gyro";
+		reg = <0x68>;
+		irq_enable = <0>;
+		poll_delay_ms = <30>;
+		type = <SENSOR_TYPE_GYROSCOPE>;
+		layout = <5>;
+	};
+
+	ak09918_compass: ak09918_compass@c {
+		compatible = "ak09911";
+		reg = <0x0c>;
+		type = <SENSOR_TYPE_COMPASS>;
+		irq_enable = <0>;
+		poll_delay_ms = <30>;
+		layout = <1>;
+		status = "okay";
+	};
+
+	cw2015@62 {
+		status = "okay";
+		compatible = "cw201x";
+		reg = <0x62>;
+		bat_config_info = <0x15 0x42 0x60 0x59 0x52 0x58 0x4D 0x48 0x48 0x44 0x44 0x46 0x49 0x48 0x32
+		0x24 0x20 0x17 0x13 0x0F 0x19 0x3E 0x51 0x45 0x08 0x76 0x0B 0x85 0x0E 0x1C 0x2E 0x3E 0x4D 0x52 0x52
+		0x57 0x3D 0x1B 0x6A 0x2D 0x25 0x43 0x52 0x87 0x8F 0x91 0x94 0x52 0x82 0x8C 0x92 0x96 0xFF 0x7B 0xBB
+		0xCB 0x2F 0x7D 0x72 0xA5 0xB5 0xC1 0x46 0xAE>;
+		monitor_sec = <5>;
+		virtual_power = <0>;
+		divider_res1 = <200>;
+		divider_res2 = <200>;
+		design_capacity = <1000>;
+	};
+
+};
+
 //用户I2C2
 &i2c2 {
 	status = "okay";
@@ -120,6 +230,22 @@
 		goodix,rst-gpio = <&gpio0 RK_PB6 GPIO_ACTIVE_HIGH>;
 		goodix,irq-gpio = <&gpio0 RK_PB5 IRQ_TYPE_LEVEL_LOW>;
 	};*/
+	// mpu6050@68 {
+	// 	compatible = "invensense,mpu6050";
+	// 	status = "okay";
+	// 	pinctrl-names = "default";
+	// 	pinctrl-0 = <&mpu6050_irq_gpio>;
+	// 	reg = <0x68>;
+	// 	irq-gpio = <&gpio3 RK_PA1 IRQ_TYPE_EDGE_RISING>;
+	// 	mpu-int_config = <0x10>;
+	// 	mpu-level_shifter = <0>;
+	// 	mpu-orientation = <0 1 0 1 0 0 0 0 1>;
+	// 	orientation-x= <0>;
+	// 	orientation-y= <1>;
+	// 	orientation-z= <0>;
+	// 	support-hw-poweroff = <0>;
+	// 	mpu-debug = <0>;
+	// };
 };
 
 &i2c3 {
diff --git a/arch/arm64/configs/rockchip_linux_defconfig b/arch/arm64/configs/rockchip_linux_defconfig
index deccc57d509f..8de9d56624a2 100644
--- a/arch/arm64/configs/rockchip_linux_defconfig
+++ b/arch/arm64/configs/rockchip_linux_defconfig
@@ -1,29 +1,52 @@
-CONFIG_DEFAULT_HOSTNAME="localhost"
-CONFIG_SYSVIPC=y
+# CONFIG_LOCALVERSION_AUTO is not set
+CONFIG_AUDIT=y
+# CONFIG_AUDITSYSCALL is not set
 CONFIG_NO_HZ=y
 CONFIG_HIGH_RES_TIMERS=y
-CONFIG_PREEMPT_VOLUNTARY=y
+CONFIG_PREEMPT=y
+CONFIG_IRQ_TIME_ACCOUNTING=y
+CONFIG_TASKSTATS=y
+CONFIG_TASK_DELAY_ACCT=y
+CONFIG_TASK_XACCT=y
+CONFIG_TASK_IO_ACCOUNTING=y
+CONFIG_PSI=y
 CONFIG_IKCONFIG=y
 CONFIG_IKCONFIG_PROC=y
-CONFIG_LOG_BUF_SHIFT=18
+CONFIG_IKHEADERS=y
+CONFIG_LOG_BUF_SHIFT=19
 CONFIG_CGROUPS=y
+CONFIG_MEMCG=y
+CONFIG_MEMCG_SWAP=y
+CONFIG_BLK_CGROUP=y
 CONFIG_CGROUP_SCHED=y
-CONFIG_CFS_BANDWIDTH=y
 CONFIG_CGROUP_FREEZER=y
 CONFIG_CPUSETS=y
-CONFIG_CGROUP_DEVICE=y
 CONFIG_CGROUP_CPUACCT=y
+CONFIG_CGROUP_BPF=y
 CONFIG_NAMESPACES=y
-CONFIG_USER_NS=y
+# CONFIG_PID_NS is not set
+CONFIG_SCHED_TUNE=y
 CONFIG_BLK_DEV_INITRD=y
+# CONFIG_RD_BZIP2 is not set
+# CONFIG_RD_LZMA is not set
+# CONFIG_RD_XZ is not set
+# CONFIG_RD_LZO is not set
+# CONFIG_RD_LZ4 is not set
+CONFIG_INITRD_ASYNC=y
 # CONFIG_ROCKCHIP_ONE_INITRD is not set
-CONFIG_CC_OPTIMIZE_FOR_SIZE=y
+# CONFIG_SYSFS_SYSCALL is not set
+# CONFIG_FHANDLE is not set
+CONFIG_KALLSYMS_ALL=y
+CONFIG_BPF_SYSCALL=y
+CONFIG_BPF_JIT_ALWAYS_ON=y
 CONFIG_EMBEDDED=y
+# CONFIG_SLUB_DEBUG is not set
 # CONFIG_COMPAT_BRK is not set
 CONFIG_PROFILING=y
 CONFIG_ARCH_ROCKCHIP=y
 CONFIG_PCI=y
 CONFIG_PCIEPORTBUS=y
+CONFIG_PCIE_ROCKCHIP_HOST=y
 CONFIG_PCIE_DW_ROCKCHIP=y
 # CONFIG_ARM64_ERRATUM_826319 is not set
 # CONFIG_ARM64_ERRATUM_827319 is not set
@@ -32,6 +55,14 @@ CONFIG_PCIE_DW_ROCKCHIP=y
 # CONFIG_ARM64_ERRATUM_832075 is not set
 # CONFIG_CAVIUM_ERRATUM_22375 is not set
 # CONFIG_CAVIUM_ERRATUM_23154 is not set
+# CONFIG_CAVIUM_ERRATUM_27456 is not set
+# CONFIG_CAVIUM_ERRATUM_30115 is not set
+# CONFIG_QCOM_FALKOR_ERRATUM_1003 is not set
+# CONFIG_QCOM_FALKOR_ERRATUM_1009 is not set
+# CONFIG_QCOM_QDF2400_ERRATUM_0065 is not set
+# CONFIG_SOCIONEXT_SYNQUACER_PREITS is not set
+# CONFIG_HISILICON_ERRATUM_161600802 is not set
+# CONFIG_QCOM_FALKOR_ERRATUM_E1041 is not set
 CONFIG_SCHED_MC=y
 CONFIG_NR_CPUS=8
 CONFIG_HZ_300=y
@@ -40,20 +71,27 @@ CONFIG_ARMV8_DEPRECATED=y
 CONFIG_SWP_EMULATION=y
 CONFIG_CP15_BARRIER_EMULATION=y
 CONFIG_SETEND_EMULATION=y
+CONFIG_ARM64_SW_TTBR0_PAN=y
+CONFIG_RANDOMIZE_BASE=y
 # CONFIG_EFI is not set
 CONFIG_COMPAT=y
+CONFIG_PM_WAKELOCKS=y
+CONFIG_PM_WAKELOCKS_LIMIT=0
+# CONFIG_PM_WAKELOCKS_GC is not set
 CONFIG_PM_DEBUG=y
 CONFIG_PM_ADVANCED_DEBUG=y
-CONFIG_WQ_POWER_EFFICIENT_DEFAULT=y
 CONFIG_ENERGY_MODEL=y
 CONFIG_CPU_IDLE=y
 CONFIG_ARM_CPUIDLE=y
 CONFIG_CPU_FREQ=y
+CONFIG_CPU_FREQ_STAT=y
+CONFIG_CPU_FREQ_TIMES=y
 CONFIG_CPU_FREQ_DEFAULT_GOV_INTERACTIVE=y
 CONFIG_CPU_FREQ_GOV_POWERSAVE=y
 CONFIG_CPU_FREQ_GOV_USERSPACE=y
 CONFIG_CPU_FREQ_GOV_ONDEMAND=y
 CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y
+CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y
 CONFIG_CPUFREQ_DT=y
 CONFIG_ARM_ROCKCHIP_CPUFREQ=y
 CONFIG_ARM_SCMI_PROTOCOL=y
@@ -62,14 +100,22 @@ CONFIG_ARM64_CRYPTO=y
 CONFIG_CRYPTO_SHA1_ARM64_CE=y
 CONFIG_CRYPTO_SHA2_ARM64_CE=y
 CONFIG_CRYPTO_GHASH_ARM64_CE=y
+CONFIG_CRYPTO_CRC32_ARM64_CE=y
 CONFIG_CRYPTO_AES_ARM64_CE_CCM=y
 CONFIG_CRYPTO_AES_ARM64_CE_BLK=y
+CONFIG_JUMP_LABEL=y
 CONFIG_MODULES=y
-CONFIG_MODULE_FORCE_LOAD=y
 CONFIG_MODULE_UNLOAD=y
-CONFIG_MODULE_FORCE_UNLOAD=y
+CONFIG_MODVERSIONS=y
+CONFIG_BLK_INLINE_ENCRYPTION=y
+CONFIG_BLK_INLINE_ENCRYPTION_FALLBACK=y
 CONFIG_PARTITION_ADVANCED=y
-# CONFIG_COMPACTION is not set
+CONFIG_CMDLINE_PARTITION=y
+# CONFIG_IOSCHED_DEADLINE is not set
+CONFIG_CFQ_GROUP_IOSCHED=y
+CONFIG_IOSCHED_BFQ=y
+CONFIG_BFQ_GROUP_IOSCHED=y
+# CONFIG_CORE_DUMP_DEFAULT_ELF_HEADERS is not set
 CONFIG_DEFAULT_MMAP_MIN_ADDR=32768
 CONFIG_CMA=y
 CONFIG_ZSMALLOC=y
@@ -77,93 +123,218 @@ CONFIG_NET=y
 CONFIG_PACKET=y
 CONFIG_UNIX=y
 CONFIG_XFRM_USER=y
+CONFIG_XFRM_INTERFACE=y
+CONFIG_XFRM_STATISTICS=y
 CONFIG_NET_KEY=y
 CONFIG_INET=y
 CONFIG_IP_MULTICAST=y
 CONFIG_IP_ADVANCED_ROUTER=y
-CONFIG_IP_MROUTE=y
+CONFIG_IP_MULTIPLE_TABLES=y
+CONFIG_IP_ROUTE_VERBOSE=y
+CONFIG_IP_PNP=y
+CONFIG_IP_PNP_DHCP=y
+CONFIG_NET_IPGRE_DEMUX=y
 CONFIG_SYN_COOKIES=y
-# CONFIG_INET_XFRM_MODE_TRANSPORT is not set
-# CONFIG_INET_XFRM_MODE_TUNNEL is not set
-# CONFIG_INET_XFRM_MODE_BEET is not set
-# CONFIG_INET_DIAG is not set
-# CONFIG_INET6_XFRM_MODE_TRANSPORT is not set
-# CONFIG_INET6_XFRM_MODE_TUNNEL is not set
-# CONFIG_INET6_XFRM_MODE_BEET is not set
-# CONFIG_IPV6_SIT is not set
+CONFIG_NET_IPVTI=y
+CONFIG_INET_AH=y
+CONFIG_INET_ESP=y
+CONFIG_INET_IPCOMP=y
+CONFIG_INET_UDP_DIAG=y
+CONFIG_INET_DIAG_DESTROY=y
+CONFIG_IPV6_ROUTER_PREF=y
+CONFIG_IPV6_ROUTE_INFO=y
+CONFIG_IPV6_OPTIMISTIC_DAD=y
+CONFIG_INET6_AH=y
+CONFIG_INET6_ESP=y
+CONFIG_INET6_IPCOMP=y
+CONFIG_IPV6_MIP6=y
+CONFIG_IPV6_VTI=y
+CONFIG_IPV6_MULTIPLE_TABLES=y
+CONFIG_IPV6_SUBTREES=y
 CONFIG_NETFILTER=y
+CONFIG_BRIDGE_NETFILTER=y
+CONFIG_NF_CONNTRACK=y
+CONFIG_NF_CONNTRACK_SECMARK=y
+CONFIG_NF_CONNTRACK_EVENTS=y
+CONFIG_NF_CONNTRACK_AMANDA=y
+CONFIG_NF_CONNTRACK_FTP=y
+CONFIG_NF_CONNTRACK_H323=y
+CONFIG_NF_CONNTRACK_IRC=y
+CONFIG_NF_CONNTRACK_NETBIOS_NS=y
+CONFIG_NF_CONNTRACK_PPTP=y
+CONFIG_NF_CONNTRACK_SANE=y
+CONFIG_NF_CONNTRACK_TFTP=y
+CONFIG_NF_CT_NETLINK=y
+CONFIG_NETFILTER_XT_TARGET_CLASSIFY=y
+CONFIG_NETFILTER_XT_TARGET_CONNMARK=y
+CONFIG_NETFILTER_XT_TARGET_CONNSECMARK=y
+CONFIG_NETFILTER_XT_TARGET_CT=y
+CONFIG_NETFILTER_XT_TARGET_IDLETIMER=y
+CONFIG_NETFILTER_XT_TARGET_LOG=y
+CONFIG_NETFILTER_XT_TARGET_MARK=y
+CONFIG_NETFILTER_XT_TARGET_NFLOG=y
+CONFIG_NETFILTER_XT_TARGET_NFQUEUE=y
+CONFIG_NETFILTER_XT_TARGET_TPROXY=y
+CONFIG_NETFILTER_XT_TARGET_TRACE=y
+CONFIG_NETFILTER_XT_TARGET_SECMARK=y
+CONFIG_NETFILTER_XT_TARGET_TCPMSS=y
+CONFIG_NETFILTER_XT_MATCH_BPF=y
+CONFIG_NETFILTER_XT_MATCH_COMMENT=y
+CONFIG_NETFILTER_XT_MATCH_CONNLIMIT=y
+CONFIG_NETFILTER_XT_MATCH_CONNMARK=y
+CONFIG_NETFILTER_XT_MATCH_CONNTRACK=y
+CONFIG_NETFILTER_XT_MATCH_HASHLIMIT=y
+CONFIG_NETFILTER_XT_MATCH_HELPER=y
+CONFIG_NETFILTER_XT_MATCH_IPRANGE=y
+CONFIG_NETFILTER_XT_MATCH_LENGTH=y
+CONFIG_NETFILTER_XT_MATCH_LIMIT=y
+CONFIG_NETFILTER_XT_MATCH_MAC=y
+CONFIG_NETFILTER_XT_MATCH_MARK=y
+CONFIG_NETFILTER_XT_MATCH_MULTIPORT=y
+CONFIG_NETFILTER_XT_MATCH_OWNER=y
+CONFIG_NETFILTER_XT_MATCH_POLICY=y
+CONFIG_NETFILTER_XT_MATCH_PKTTYPE=y
+CONFIG_NETFILTER_XT_MATCH_QUOTA=y
+CONFIG_NETFILTER_XT_MATCH_QUOTA2=y
+CONFIG_NETFILTER_XT_MATCH_QUOTA2_LOG=y
+CONFIG_NETFILTER_XT_MATCH_SOCKET=y
+CONFIG_NETFILTER_XT_MATCH_STATE=y
+CONFIG_NETFILTER_XT_MATCH_STATISTIC=y
+CONFIG_NETFILTER_XT_MATCH_STRING=y
+CONFIG_NETFILTER_XT_MATCH_TIME=y
+CONFIG_NETFILTER_XT_MATCH_U32=y
 CONFIG_IP_NF_IPTABLES=y
+CONFIG_IP_NF_MATCH_AH=y
+CONFIG_IP_NF_MATCH_ECN=y
+CONFIG_IP_NF_MATCH_RPFILTER=y
+CONFIG_IP_NF_MATCH_TTL=y
+CONFIG_IP_NF_FILTER=y
+CONFIG_IP_NF_TARGET_REJECT=y
+CONFIG_IP_NF_NAT=y
+CONFIG_IP_NF_TARGET_MASQUERADE=y
+CONFIG_IP_NF_TARGET_NETMAP=y
+CONFIG_IP_NF_TARGET_REDIRECT=y
 CONFIG_IP_NF_MANGLE=y
+CONFIG_IP_NF_RAW=y
+CONFIG_IP_NF_SECURITY=y
+CONFIG_IP_NF_ARPTABLES=y
+CONFIG_IP_NF_ARPFILTER=y
+CONFIG_IP_NF_ARP_MANGLE=y
+CONFIG_IP6_NF_IPTABLES=y
+CONFIG_IP6_NF_MATCH_RPFILTER=y
+CONFIG_IP6_NF_FILTER=y
+CONFIG_IP6_NF_TARGET_REJECT=y
+CONFIG_IP6_NF_MANGLE=y
+CONFIG_IP6_NF_RAW=y
+CONFIG_BRIDGE_NF_EBTABLES=y
+CONFIG_BRIDGE_EBT_BROUTE=y
+CONFIG_L2TP=y
+CONFIG_BRIDGE=y
+CONFIG_NET_SCHED=y
+CONFIG_NET_SCH_HTB=y
+CONFIG_NET_SCH_PRIO=y
+CONFIG_NET_SCH_NETEM=y
+CONFIG_NET_SCH_INGRESS=y
+CONFIG_NET_CLS_FW=y
+CONFIG_NET_CLS_U32=y
+CONFIG_CLS_U32_MARK=y
+CONFIG_NET_CLS_FLOW=y
+CONFIG_NET_CLS_BPF=y
+CONFIG_NET_EMATCH=y
+CONFIG_NET_EMATCH_CMP=y
+CONFIG_NET_EMATCH_NBYTE=y
+CONFIG_NET_EMATCH_U32=y
+CONFIG_NET_EMATCH_META=y
+CONFIG_NET_EMATCH_TEXT=y
+CONFIG_NET_CLS_ACT=y
+CONFIG_BPF_JIT=y
 CONFIG_BT=y
 CONFIG_BT_RFCOMM=y
+CONFIG_BT_RFCOMM_TTY=y
+CONFIG_BT_BNEP=y
+CONFIG_BT_BNEP_MC_FILTER=y
+CONFIG_BT_BNEP_PROTO_FILTER=y
 CONFIG_BT_HIDP=y
-CONFIG_BT_HCIBTUSB=y
 CONFIG_BT_HCIUART=y
-CONFIG_BT_HCIUART_ATH3K=y
-CONFIG_BT_HCIBFUSB=y
-CONFIG_BT_HCIVHCI=y
-CONFIG_BT_MRVL=y
-CONFIG_BT_MRVL_SDIO=y
-CONFIG_NL80211_TESTMODE=y
-CONFIG_CFG80211_DEBUGFS=y
-CONFIG_CFG80211_WEXT=y
-CONFIG_MAC80211_LEDS=y
-CONFIG_MAC80211_DEBUGFS=y
-CONFIG_MAC80211_DEBUG_MENU=y
-CONFIG_MAC80211_VERBOSE_DEBUG=y
+CONFIG_BT_HCIUART_H4=y
 CONFIG_RFKILL=y
 CONFIG_DEVTMPFS=y
-CONFIG_DEVTMPFS_MOUNT=y
-CONFIG_DEBUG_DEVRES=y
+CONFIG_FW_LOADER_USER_HELPER=y
+# CONFIG_FW_CACHE is not set
+CONFIG_MALI_MEMORY_GROUP_MANAGER=y
 CONFIG_DMA_CMA=y
-CONFIG_CONNECTOR=y
-CONFIG_MTD=y
-CONFIG_MTD_CMDLINE_PARTS=y
-CONFIG_MTD_BLOCK=y
-CONFIG_MTD_UBI=y
 CONFIG_ZRAM=y
 CONFIG_BLK_DEV_LOOP=y
+CONFIG_BLK_DEV_LOOP_MIN_COUNT=16
 CONFIG_BLK_DEV_RAM=y
-CONFIG_BLK_DEV_RAM_COUNT=1
+CONFIG_BLK_DEV_RAM_SIZE=8192
 CONFIG_BLK_DEV_NVME=y
 CONFIG_SRAM=y
+CONFIG_UID_SYS_STATS=y
 CONFIG_BLK_DEV_SD=y
-CONFIG_BLK_DEV_SR=y
+CONFIG_CHR_DEV_SG=y
+CONFIG_CHR_DEV_SCH=y
+CONFIG_SCSI_CONSTANTS=y
+CONFIG_SCSI_LOGGING=y
 CONFIG_SCSI_SCAN_ASYNC=y
-CONFIG_SCSI_SPI_ATTRS=y
 CONFIG_ATA=y
 CONFIG_SATA_AHCI=y
 CONFIG_SATA_AHCI_PLATFORM=y
 # CONFIG_ATA_SFF is not set
 CONFIG_MD=y
+CONFIG_BLK_DEV_DM=y
+CONFIG_DM_CRYPT=y
+CONFIG_DM_DEFAULT_KEY=y
+CONFIG_DM_SNAPSHOT=y
+CONFIG_DM_UEVENT=y
+CONFIG_DM_VERITY=y
+CONFIG_DM_VERITY_AVB=y
+CONFIG_DM_VERITY_FEC=y
+CONFIG_DM_BOW=y
+CONFIG_DM_ANDROID_VERITY_AT_MOST_ONCE_DEFAULT_ENABLED=y
 CONFIG_NETDEVICES=y
+CONFIG_DUMMY=y
+CONFIG_TUN=y
+CONFIG_VETH=y
 # CONFIG_NET_VENDOR_3COM is not set
 # CONFIG_NET_VENDOR_ADAPTEC is not set
 # CONFIG_NET_VENDOR_AGERE is not set
+# CONFIG_NET_VENDOR_ALACRITECH is not set
 # CONFIG_NET_VENDOR_ALTEON is not set
+# CONFIG_NET_VENDOR_AMAZON is not set
 # CONFIG_NET_VENDOR_AMD is not set
+# CONFIG_NET_VENDOR_AQUANTIA is not set
 # CONFIG_NET_VENDOR_ARC is not set
 # CONFIG_NET_VENDOR_ATHEROS is not set
+# CONFIG_NET_VENDOR_AURORA is not set
 # CONFIG_NET_VENDOR_BROADCOM is not set
 # CONFIG_NET_VENDOR_BROCADE is not set
+# CONFIG_NET_VENDOR_CADENCE is not set
 # CONFIG_NET_VENDOR_CAVIUM is not set
 # CONFIG_NET_VENDOR_CHELSIO is not set
 # CONFIG_NET_VENDOR_CISCO is not set
+# CONFIG_NET_VENDOR_CORTINA is not set
 # CONFIG_NET_VENDOR_DEC is not set
 # CONFIG_NET_VENDOR_DLINK is not set
 # CONFIG_NET_VENDOR_EMULEX is not set
 # CONFIG_NET_VENDOR_EZCHIP is not set
 # CONFIG_NET_VENDOR_HISILICON is not set
 # CONFIG_NET_VENDOR_HP is not set
+# CONFIG_NET_VENDOR_HUAWEI is not set
 # CONFIG_NET_VENDOR_INTEL is not set
 # CONFIG_NET_VENDOR_MARVELL is not set
 # CONFIG_NET_VENDOR_MELLANOX is not set
 # CONFIG_NET_VENDOR_MICREL is not set
 # CONFIG_NET_VENDOR_MICROCHIP is not set
+# CONFIG_NET_VENDOR_MICROSEMI is not set
 # CONFIG_NET_VENDOR_MYRI is not set
 # CONFIG_NET_VENDOR_NATSEMI is not set
+# CONFIG_NET_VENDOR_NETERION is not set
+# CONFIG_NET_VENDOR_NETRONOME is not set
+# CONFIG_NET_VENDOR_NI is not set
 # CONFIG_NET_VENDOR_NVIDIA is not set
 # CONFIG_NET_VENDOR_OKI is not set
+# CONFIG_NET_VENDOR_PACKET_ENGINES is not set
 # CONFIG_NET_VENDOR_QLOGIC is not set
 # CONFIG_NET_VENDOR_QUALCOMM is not set
 # CONFIG_NET_VENDOR_RDC is not set
@@ -172,10 +343,13 @@ CONFIG_NETDEVICES=y
 # CONFIG_NET_VENDOR_ROCKER is not set
 # CONFIG_NET_VENDOR_SAMSUNG is not set
 # CONFIG_NET_VENDOR_SEEQ is not set
+# CONFIG_NET_VENDOR_SOLARFLARE is not set
 # CONFIG_NET_VENDOR_SILAN is not set
 # CONFIG_NET_VENDOR_SIS is not set
 # CONFIG_NET_VENDOR_SMSC is not set
+# CONFIG_NET_VENDOR_SOCIONEXT is not set
 CONFIG_STMMAC_ETH=y
+# CONFIG_DWMAC_GENERIC is not set
 # CONFIG_NET_VENDOR_SUN is not set
 # CONFIG_NET_VENDOR_SYNOPSYS is not set
 # CONFIG_NET_VENDOR_TEHUTI is not set
@@ -183,101 +357,193 @@ CONFIG_STMMAC_ETH=y
 # CONFIG_NET_VENDOR_VIA is not set
 # CONFIG_NET_VENDOR_WIZNET is not set
 CONFIG_ROCKCHIP_PHY=y
+CONFIG_PPP=y
+CONFIG_PPP_BSDCOMP=y
+CONFIG_PPP_DEFLATE=y
+CONFIG_PPP_FILTER=y
+CONFIG_PPP_MPPE=y
+CONFIG_PPP_MULTILINK=y
+CONFIG_PPPOE=y
+CONFIG_PPTP=y
+CONFIG_PPPOL2TP=y
+CONFIG_PPP_ASYNC=y
+CONFIG_PPP_SYNC_TTY=y
+CONFIG_SLIP=y
+CONFIG_SLIP_COMPRESSED=y
+CONFIG_SLIP_MODE_SLIP6=y
+CONFIG_USB_CATC=y
+CONFIG_USB_KAWETH=y
+CONFIG_USB_PEGASUS=y
 CONFIG_USB_RTL8150=y
 CONFIG_USB_RTL8152=y
+CONFIG_USB_USBNET=y
+CONFIG_USB_NET_CDC_EEM=y
 CONFIG_USB_NET_CDC_MBIM=y
-# CONFIG_USB_NET_NET1080 is not set
-# CONFIG_USB_NET_CDC_SUBSET is not set
-# CONFIG_USB_NET_ZAURUS is not set
-CONFIG_LIBERTAS_THINFIRM=y
-CONFIG_MWIFIEX=m
-CONFIG_MWIFIEX_SDIO=m
+CONFIG_USB_NET_DM9601=y
+CONFIG_USB_NET_SMSC75XX=y
+CONFIG_USB_NET_SMSC95XX=y
+CONFIG_USB_NET_GL620A=y
+CONFIG_USB_NET_PLUSB=y
+CONFIG_USB_NET_MCS7830=y
+CONFIG_USB_NET_RNDIS_HOST=y
+CONFIG_USB_ALI_M5632=y
+CONFIG_USB_AN2720=y
+CONFIG_USB_EPSON2888=y
+CONFIG_USB_KC2190=y
+CONFIG_USB_NET_CX82310_ETH=y
+CONFIG_USB_NET_KALMIA=y
+CONFIG_USB_HSO=y
+CONFIG_USB_NET_INT51X1=y
+CONFIG_USB_IPHETH=y
+CONFIG_USB_SIERRA_NET=y
+# CONFIG_WLAN_VENDOR_ADMTEK is not set
+# CONFIG_WLAN_VENDOR_ATH is not set
+# CONFIG_WLAN_VENDOR_ATMEL is not set
+# CONFIG_WLAN_VENDOR_BROADCOM is not set
+# CONFIG_WLAN_VENDOR_CISCO is not set
+# CONFIG_WLAN_VENDOR_INTEL is not set
+# CONFIG_WLAN_VENDOR_INTERSIL is not set
+# CONFIG_WLAN_VENDOR_MARVELL is not set
+# CONFIG_WLAN_VENDOR_MEDIATEK is not set
+# CONFIG_WLAN_VENDOR_RALINK is not set
+# CONFIG_WLAN_VENDOR_REALTEK is not set
+# CONFIG_WLAN_VENDOR_RSI is not set
+# CONFIG_WLAN_VENDOR_ST is not set
+# CONFIG_WLAN_VENDOR_TI is not set
+# CONFIG_WLAN_VENDOR_ZYDAS is not set
+# CONFIG_WLAN_VENDOR_QUANTENNA is not set
 CONFIG_WL_ROCKCHIP=y
 CONFIG_WIFI_BUILD_MODULE=y
-CONFIG_WIFI_LOAD_DRIVER_WHEN_KERNEL_BOOTUP=y
 CONFIG_AP6XXX=m
-CONFIG_USB_NET_RNDIS_WLAN=y
-CONFIG_INPUT_FF_MEMLESS=y
+CONFIG_RTL8723CS=m
+CONFIG_RTL8821CS=m
+CONFIG_RTL8822BS=m
+CONFIG_LTE=y
+CONFIG_LTE_RM310=y
 CONFIG_INPUT_EVDEV=y
 CONFIG_KEYBOARD_ADC=y
 # CONFIG_KEYBOARD_ATKBD is not set
 CONFIG_KEYBOARD_GPIO=y
-CONFIG_KEYBOARD_GPIO_POLLED=y
-CONFIG_KEYBOARD_CROS_EC=y
-# CONFIG_MOUSE_PS2 is not set
-CONFIG_MOUSE_CYAPA=y
-CONFIG_MOUSE_ELAN_I2C=y
+# CONFIG_INPUT_MOUSE is not set
+CONFIG_INPUT_JOYSTICK=y
+CONFIG_JOYSTICK_XPAD=y
+CONFIG_JOYSTICK_XPAD_FF=y
+CONFIG_JOYSTICK_XPAD_LEDS=y
+CONFIG_INPUT_TABLET=y
+CONFIG_TABLET_USB_ACECAD=y
+CONFIG_TABLET_USB_AIPTEK=y
+CONFIG_TABLET_USB_GTCO=y
+CONFIG_TABLET_USB_HANWANG=y
+CONFIG_TABLET_USB_KBTAB=y
 CONFIG_INPUT_TOUCHSCREEN=y
-CONFIG_TOUCHSCREEN_ATMEL_MXT=y
+CONFIG_TOUCHSCREEN_GSLX6801=y
+CONFIG_TOUCHSCREEN_GSLX680_PAD=y
 CONFIG_TOUCHSCREEN_GSLX680_VR=y
-CONFIG_TOUCHSCREEN_GSL3673=y
+CONFIG_TOUCHSCREEN_GSL3676=y
 CONFIG_TOUCHSCREEN_GT9XX=y
-CONFIG_TOUCHSCREEN_ELAN=y
+CONFIG_TOUCHSCREEN_HYN_CST2XX=y
 CONFIG_TOUCHSCREEN_WACOM_W9013=y
-CONFIG_TOUCHSCREEN_USB_COMPOSITE=y
 CONFIG_TOUCHSCREEN_GT1X=y
+CONFIG_TOUCHSCREEN_FTS=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_DEVICETREE_SUPPORT=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_I2C=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_DEVICE_ACCESS=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_LOADER=y
+CONFIG_TOUCHSCREEN_CST128A_CUST=y
 CONFIG_ROCKCHIP_REMOTECTL=y
 CONFIG_ROCKCHIP_REMOTECTL_PWM=y
+CONFIG_SENSOR_DEVICE=y
+CONFIG_GSENSOR_DEVICE=y
+CONFIG_GS_MMA8452=y
+CONFIG_MPU6880_ACC=y
+CONFIG_MPU6500_ACC=y
+CONFIG_GS_KXTJ9=y
+CONFIG_GS_LIS3DH=y
+CONFIG_GS_MMA7660=y
+CONFIG_GS_MC3230=y
+CONFIG_GS_SC7660=y
+CONFIG_GS_SC7A20=y
+CONFIG_GS_SC7A30=y
+CONFIG_GS_MXC6655XA=y
+CONFIG_GS_LSM303D=y
+CONFIG_LSM330_ACC=y
+CONFIG_BMA2XX_ACC=y
+CONFIG_GS_DA223=y
+CONFIG_COMPASS_DEVICE=y
+CONFIG_COMPASS_AK8975=y
+CONFIG_COMPASS_AK8963=y
+CONFIG_GYROSCOPE_DEVICE=y
+CONFIG_GYRO_L3G4200D=y
+CONFIG_GYRO_L3G20D=y
+CONFIG_GYRO_EWTSA=y
+CONFIG_GYRO_MPU6500=y
+CONFIG_GYRO_MPU6880=y
+CONFIG_GYRO_LSM330=y
+CONFIG_LIGHT_DEVICE=y
+CONFIG_LS_CM3217=y
+CONFIG_LS_CM3218=y
+CONFIG_LS_STK3410=y
+CONFIG_PROXIMITY_DEVICE=y
+CONFIG_PS_STK3410=y
+CONFIG_HALL_DEVICE=y
+CONFIG_HS_MH248=y
 CONFIG_INPUT_MISC=y
 CONFIG_INPUT_UINPUT=y
 CONFIG_INPUT_RK805_PWRKEY=y
 # CONFIG_SERIO is not set
-CONFIG_VT_HW_CONSOLE_BINDING=y
+# CONFIG_VT is not set
 # CONFIG_LEGACY_PTYS is not set
+# CONFIG_DEVMEM is not set
 CONFIG_SERIAL_8250=y
+# CONFIG_SERIAL_8250_DEPRECATED_OPTIONS is not set
 CONFIG_SERIAL_8250_CONSOLE=y
 # CONFIG_SERIAL_8250_PCI is not set
 CONFIG_SERIAL_8250_NR_UARTS=10
 CONFIG_SERIAL_8250_RUNTIME_UARTS=10
 CONFIG_SERIAL_8250_DW=y
-CONFIG_SERIAL_OF_PLATFORM=y
 CONFIG_HW_RANDOM=y
+# CONFIG_HW_RANDOM_CAVIUM is not set
 CONFIG_HW_RANDOM_ROCKCHIP=y
-CONFIG_TCG_TPM=y
-CONFIG_TCG_TIS_I2C_INFINEON=y
+# CONFIG_DEVPORT is not set
 CONFIG_I2C_CHARDEV=y
+CONFIG_I2C_GPIO=y
 CONFIG_I2C_RK3X=y
-CONFIG_I2C_CROS_EC_TUNNEL=y
 CONFIG_SPI=y
-CONFIG_SPI_BITBANG=y
 CONFIG_SPI_ROCKCHIP=y
 CONFIG_SPI_SPIDEV=y
 CONFIG_PINCTRL_RK805=y
 CONFIG_GPIO_SYSFS=y
-CONFIG_GPIO_GENERIC_PLATFORM=y
 CONFIG_POWER_AVS=y
 CONFIG_ROCKCHIP_IODOMAIN=y
 CONFIG_POWER_RESET_GPIO=y
-CONFIG_POWER_RESET_GPIO_RESTART=y
 CONFIG_SYSCON_REBOOT_MODE=y
-CONFIG_BATTERY_SBS=y
-CONFIG_CHARGER_GPIO=y
-CONFIG_CHARGER_BQ24735=y
+CONFIG_TEST_POWER=y
+CONFIG_CHARGER_BQ25700=y
+CONFIG_BATTERY_CW2015=y
 CONFIG_BATTERY_RK817=y
 CONFIG_CHARGER_RK817=y
+CONFIG_BATTERY_RK818=y
+CONFIG_CHARGER_RK818=y
+CONFIG_EC20_POWER=y
 CONFIG_THERMAL=y
 CONFIG_THERMAL_WRITABLE_TRIPS=y
 CONFIG_THERMAL_DEFAULT_GOV_POWER_ALLOCATOR=y
 CONFIG_THERMAL_GOV_FAIR_SHARE=y
 CONFIG_THERMAL_GOV_STEP_WISE=y
+CONFIG_THERMAL_GOV_USER_SPACE=y
 CONFIG_CPU_THERMAL=y
 CONFIG_DEVFREQ_THERMAL=y
 CONFIG_ROCKCHIP_THERMAL=y
+CONFIG_RK3368_THERMAL=y
 CONFIG_WATCHDOG=y
 CONFIG_DW_WATCHDOG=y
-CONFIG_MFD_CROS_EC=y
 CONFIG_MFD_RK618=y
 CONFIG_MFD_RK628=y
+CONFIG_MFD_RK630_I2C=y
 CONFIG_MFD_RK808=y
-CONFIG_MFD_TPS6586X=y
 CONFIG_FUSB_30X=y
 CONFIG_REGULATOR=y
-CONFIG_REGULATOR_DEBUG=y
 CONFIG_REGULATOR_FIXED_VOLTAGE=y
 CONFIG_REGULATOR_ACT8865=y
 CONFIG_REGULATOR_FAN53555=y
@@ -287,8 +553,8 @@ CONFIG_REGULATOR_MP8865=y
 CONFIG_REGULATOR_PWM=y
 CONFIG_REGULATOR_RK808=y
 CONFIG_REGULATOR_TPS65132=y
-CONFIG_REGULATOR_TPS6586X=y
 CONFIG_REGULATOR_XZ3216=y
+CONFIG_REGULATOR_DIO5632=y
 CONFIG_MEDIA_SUPPORT=y
 CONFIG_MEDIA_CAMERA_SUPPORT=y
 CONFIG_MEDIA_CEC_SUPPORT=y
@@ -296,23 +562,28 @@ CONFIG_MEDIA_CONTROLLER=y
 CONFIG_VIDEO_V4L2_SUBDEV_API=y
 CONFIG_MEDIA_USB_SUPPORT=y
 CONFIG_USB_VIDEO_CLASS=y
-# CONFIG_USB_VIDEO_CLASS_INPUT_EVDEV is not set
-# CONFIG_USB_GSPCA is not set
 CONFIG_V4L_PLATFORM_DRIVERS=y
-CONFIG_SOC_CAMERA=y
+CONFIG_VIDEO_ROCKCHIP_CIF=y
 CONFIG_VIDEO_ROCKCHIP_ISP1=y
 CONFIG_VIDEO_ROCKCHIP_ISP=y
-CONFIG_V4L_MEM2MEM_DRIVERS=y
-CONFIG_VIDEO_ROCKCHIP_RGA=y
 # CONFIG_MEDIA_SUBDRV_AUTOSELECT is not set
+CONFIG_VIDEO_DW9714=y
+CONFIG_VIDEO_VM149C=y
 CONFIG_VIDEO_TC35874X=y
 CONFIG_VIDEO_RK628_CSI=y
-CONFIG_VIDEO_OS04A10=y
-CONFIG_VIDEO_OV4689=y
+CONFIG_VIDEO_OV2680=y
+CONFIG_VIDEO_OV5648=y
 CONFIG_VIDEO_OV5695=y
-CONFIG_VIDEO_OV7251=y
+CONFIG_VIDEO_OV8858=y
 CONFIG_VIDEO_OV13850=y
+CONFIG_VIDEO_GC0312=y
+CONFIG_VIDEO_GC032A=y
+CONFIG_VIDEO_GC2145=y
+CONFIG_VIDEO_GC2355=y
+CONFIG_VIDEO_GC2385=y
+CONFIG_VIDEO_GC4C33=y
 CONFIG_VIDEO_GC8034=y
+CONFIG_VIDEO_SGM3784=y
 # CONFIG_VGA_ARB is not set
 CONFIG_DRM=y
 CONFIG_DRM_IGNORE_IOTCL_PERMIT=y
@@ -327,7 +598,10 @@ CONFIG_ROCKCHIP_LVDS=y
 CONFIG_ROCKCHIP_DRM_TVE=y
 CONFIG_ROCKCHIP_RGB=y
 CONFIG_DRM_ROCKCHIP_RK618=y
+CONFIG_DRM_ROCKCHIP_RK628=y
 CONFIG_DRM_PANEL_SIMPLE=y
+CONFIG_DRM_RK630_TVE=y
+CONFIG_DRM_RK1000_TVE=y
 CONFIG_DRM_SII902X=y
 CONFIG_DRM_DW_HDMI_I2S_AUDIO=y
 CONFIG_DRM_DW_HDMI_CEC=y
@@ -337,20 +611,19 @@ CONFIG_MALI450=y
 CONFIG_MALI_SHARED_INTERRUPTS=y
 CONFIG_MALI_DT=y
 CONFIG_MALI_DEVFREQ=y
-CONFIG_MALI_MIDGARD=y
-CONFIG_MALI_EXPERT=y
-CONFIG_MALI_PLATFORM_THIRDPARTY=y
-CONFIG_MALI_PLATFORM_THIRDPARTY_NAME="rk"
-CONFIG_MALI_DEBUG=y
 CONFIG_MALI_PWRSOFT_765=y
 CONFIG_MALI_BIFROST=y
 CONFIG_MALI_BIFROST_DEVFREQ=y
 CONFIG_MALI_PLATFORM_NAME="rk"
+CONFIG_MALI_BIFROST_EXPERT=y
+CONFIG_MALI_BIFROST_DEBUG=y
 CONFIG_BACKLIGHT_LCD_SUPPORT=y
 # CONFIG_LCD_CLASS_DEVICE is not set
 CONFIG_BACKLIGHT_CLASS_DEVICE=y
+# CONFIG_BACKLIGHT_GENERIC is not set
 CONFIG_BACKLIGHT_PWM=y
 CONFIG_ROCKCHIP_RGA2=y
+CONFIG_IEP=y
 CONFIG_ROCKCHIP_MPP_SERVICE=y
 CONFIG_ROCKCHIP_MPP_RKVDEC=y
 CONFIG_ROCKCHIP_MPP_RKVDEC2=y
@@ -363,11 +636,10 @@ CONFIG_ROCKCHIP_MPP_IEP2=y
 CONFIG_ROCKCHIP_MPP_JPGDEC=y
 CONFIG_SOUND=y
 CONFIG_SND=y
-CONFIG_SND_HRTIMER=y
 CONFIG_SND_DYNAMIC_MINORS=y
 # CONFIG_SND_SUPPORT_OLD_API is not set
-CONFIG_SND_SEQUENCER=y
-CONFIG_SND_SEQ_DUMMY=y
+CONFIG_SND_VERBOSE_PRINTK=y
+# CONFIG_SND_DRIVERS is not set
 # CONFIG_SND_PCI is not set
 # CONFIG_SND_SPI is not set
 CONFIG_SND_USB_AUDIO=y
@@ -376,67 +648,138 @@ CONFIG_SND_SOC_ROCKCHIP=y
 CONFIG_SND_SOC_ROCKCHIP_I2S_TDM=y
 CONFIG_SND_SOC_ROCKCHIP_PDM=y
 CONFIG_SND_SOC_ROCKCHIP_SPDIF=y
-CONFIG_SND_SOC_ROCKCHIP_MAX98090=y
 CONFIG_SND_SOC_ROCKCHIP_MULTICODECS=y
-CONFIG_SND_SOC_ROCKCHIP_RT5645=y
-CONFIG_SND_SOC_ROCKCHIP_RT5651_RK628=y
+CONFIG_SND_SOC_ROCKCHIP_RT5651=y
+CONFIG_SND_SOC_BT_SCO=y
+CONFIG_SND_SOC_CX2072X=y
 CONFIG_SND_SOC_DUMMY_CODEC=y
 CONFIG_SND_SOC_ES7202=y
+CONFIG_SND_SOC_ES7210=y
 CONFIG_SND_SOC_ES7243E=y
 CONFIG_SND_SOC_ES8311=y
 CONFIG_SND_SOC_ES8316=y
+CONFIG_SND_SOC_ES8396=y
 CONFIG_SND_SOC_RK3328=y
 CONFIG_SND_SOC_RK817=y
 CONFIG_SND_SOC_RK_CODEC_DIGITAL=y
-CONFIG_SND_SOC_RT5616=y
 CONFIG_SND_SOC_RT5640=y
 CONFIG_SND_SOC_SPDIF=y
 CONFIG_SND_SIMPLE_CARD=y
-CONFIG_HID_BATTERY_STRENGTH=y
 CONFIG_HIDRAW=y
 CONFIG_UHID=y
+CONFIG_HID_A4TECH=y
+CONFIG_HID_ACRUX=y
+CONFIG_HID_ACRUX_FF=y
+CONFIG_HID_APPLE=y
+CONFIG_HID_APPLEIR=y
+CONFIG_HID_AUREAL=y
+CONFIG_HID_BELKIN=y
+CONFIG_HID_CHERRY=y
+CONFIG_HID_CHICONY=y
+CONFIG_HID_PRODIKEYS=y
+CONFIG_HID_CYPRESS=y
+CONFIG_HID_DRAGONRISE=y
+CONFIG_DRAGONRISE_FF=y
+CONFIG_HID_EMS_FF=y
+CONFIG_HID_ELECOM=y
+CONFIG_HID_EZKEY=y
+CONFIG_HID_HOLTEK=y
+CONFIG_HID_KEYTOUCH=y
+CONFIG_HID_KYE=y
+CONFIG_HID_UCLOGIC=y
+CONFIG_HID_WALTOP=y
+CONFIG_HID_GYRATION=y
+CONFIG_HID_ICADE=y
+CONFIG_HID_TWINHAN=y
 CONFIG_HID_KENSINGTON=y
+CONFIG_HID_LCPOWER=y
+CONFIG_HID_LENOVO=y
+CONFIG_HID_LOGITECH=y
+CONFIG_HID_LOGITECH_DJ=y
+CONFIG_LOGITECH_FF=y
+CONFIG_LOGIRUMBLEPAD2_FF=y
+CONFIG_LOGIG940_FF=y
+CONFIG_HID_MAGICMOUSE=y
+CONFIG_HID_MICROSOFT=y
+CONFIG_HID_MONTEREY=y
 CONFIG_HID_MULTITOUCH=y
+CONFIG_HID_NINTENDO=y
+CONFIG_HID_NTRIG=y
+CONFIG_HID_ORTEK=y
+CONFIG_HID_PANTHERLORD=y
+CONFIG_PANTHERLORD_FF=y
+CONFIG_HID_PETALYNX=y
+CONFIG_HID_PICOLCD=y
+CONFIG_HID_PRIMAX=y
+CONFIG_HID_ROCCAT=y
+CONFIG_HID_SAITEK=y
+CONFIG_HID_SAMSUNG=y
+CONFIG_HID_SONY=y
+CONFIG_HID_SPEEDLINK=y
+CONFIG_HID_STEAM=y
+CONFIG_HID_STEELSERIES=y
+CONFIG_HID_SUNPLUS=y
+CONFIG_HID_GREENASIA=y
+CONFIG_GREENASIA_FF=y
+CONFIG_HID_SMARTJOYPLUS=y
+CONFIG_SMARTJOYPLUS_FF=y
+CONFIG_HID_TIVO=y
+CONFIG_HID_TOPSEED=y
+CONFIG_HID_THINGM=y
+CONFIG_HID_THRUSTMASTER=y
+CONFIG_HID_WACOM=y
+CONFIG_HID_WIIMOTE=y
+CONFIG_HID_ZEROPLUS=y
+CONFIG_HID_ZYDACRON=y
+CONFIG_HID_ALPS=y
 CONFIG_USB_HIDDEV=y
 CONFIG_I2C_HID=y
 CONFIG_USB_ANNOUNCE_NEW_DEVICES=y
-# CONFIG_USB_DEFAULT_PERSIST is not set
-CONFIG_USB_OTG=y
 CONFIG_USB_MON=y
 CONFIG_USB_XHCI_HCD=y
 CONFIG_USB_EHCI_HCD=y
-CONFIG_USB_EHCI_ROOT_HUB_TT=y
 CONFIG_USB_EHCI_HCD_PLATFORM=y
 CONFIG_USB_OHCI_HCD=y
 # CONFIG_USB_OHCI_HCD_PCI is not set
 CONFIG_USB_OHCI_HCD_PLATFORM=y
 CONFIG_USB_ACM=y
+CONFIG_USB_PRINTER=y
 CONFIG_USB_STORAGE=y
+CONFIG_USB_STORAGE_DATAFAB=y
+CONFIG_USB_STORAGE_FREECOM=y
+CONFIG_USB_STORAGE_ISD200=y
+CONFIG_USB_STORAGE_USBAT=y
+CONFIG_USB_STORAGE_SDDR09=y
+CONFIG_USB_STORAGE_SDDR55=y
+CONFIG_USB_STORAGE_JUMPSHOT=y
+CONFIG_USB_STORAGE_ALAUDA=y
+CONFIG_USB_STORAGE_ONETOUCH=y
+CONFIG_USB_STORAGE_KARMA=y
+CONFIG_USB_STORAGE_CYPRESS_ATACB=y
+CONFIG_USB_STORAGE_ENE_UB6250=y
 CONFIG_USB_UAS=y
 CONFIG_USB_DWC3=y
 CONFIG_USB_DWC2=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_GENERIC=y
-CONFIG_USB_SERIAL_CP210X=y
-CONFIG_USB_SERIAL_FTDI_SIO=y
-CONFIG_USB_SERIAL_KEYSPAN=y
-CONFIG_USB_SERIAL_PL2303=y
-CONFIG_USB_SERIAL_OTI6858=y
-CONFIG_USB_SERIAL_QUALCOMM=y
-CONFIG_USB_SERIAL_SIERRAWIRELESS=y
 CONFIG_USB_SERIAL_OPTION=y
+CONFIG_USB_TRANCEVIBRATOR=y
 CONFIG_USB_GADGET=y
 CONFIG_USB_GADGET_DEBUG_FILES=y
 CONFIG_USB_GADGET_VBUS_DRAW=500
 CONFIG_USB_CONFIGFS=y
 CONFIG_USB_CONFIGFS_UEVENT=y
 CONFIG_USB_CONFIGFS_ACM=y
+CONFIG_USB_CONFIGFS_RNDIS=y
 CONFIG_USB_CONFIGFS_MASS_STORAGE=y
 CONFIG_USB_CONFIGFS_F_FS=y
+CONFIG_USB_CONFIGFS_F_ACC=y
+CONFIG_USB_CONFIGFS_F_AUDIO_SRC=y
+CONFIG_USB_CONFIGFS_F_MIDI=y
 CONFIG_USB_CONFIGFS_F_UVC=y
 CONFIG_MMC=y
 CONFIG_MMC_BLOCK_MINORS=32
-CONFIG_MMC_TEST=y
+CONFIG_MMC_CRYPTO=y
 CONFIG_SDIO_KEEPALIVE=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
@@ -444,32 +787,45 @@ CONFIG_MMC_SDHCI_OF_ARASAN=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
 CONFIG_MMC_DW=y
 CONFIG_MMC_DW_ROCKCHIP=y
-CONFIG_NEW_LEDS=y
-CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_CLASS_FLASH=y
 CONFIG_LEDS_GPIO=y
-CONFIG_LEDS_IS31FL32XX=y
+CONFIG_LEDS_RGB13H=y
 CONFIG_LEDS_TRIGGER_TIMER=y
+CONFIG_LEDS_TRIGGER_HEARTBEAT=y
+CONFIG_LEDS_TRIGGER_BACKLIGHT=y
+CONFIG_LEDS_TRIGGER_DEFAULT_ON=y
 CONFIG_RTC_CLASS=y
-CONFIG_RTC_DRV_HYM8563=y
 CONFIG_RTC_DRV_RK808=y
 CONFIG_DMADEVICES=y
 CONFIG_PL330_DMA=y
+CONFIG_SW_SYNC=y
 CONFIG_STAGING=y
+CONFIG_ASHMEM=y
+CONFIG_ION=y
+CONFIG_ION_SYSTEM_HEAP=y
+CONFIG_ION_CMA_HEAP=y
+CONFIG_ION_FORCE_DMA_SYNC=y
 CONFIG_FIQ_DEBUGGER=y
 CONFIG_FIQ_DEBUGGER_NO_SLEEP=y
 CONFIG_FIQ_DEBUGGER_CONSOLE=y
 CONFIG_FIQ_DEBUGGER_CONSOLE_DEFAULT_ENABLE=y
 CONFIG_FIQ_DEBUGGER_TRUST_ZONE=y
 CONFIG_RK_CONSOLE_THREAD=y
+CONFIG_POWERVR_ROGUE_N=y
 CONFIG_COMMON_CLK_RK808=y
 CONFIG_COMMON_CLK_SCMI=y
+# CONFIG_COMMON_CLK_XGENE is not set
+CONFIG_COMMON_CLK_PWM=y
 CONFIG_MAILBOX=y
+CONFIG_RK3368_MBOX=y
+CONFIG_RK3368_SCPI_PROTOCOL=y
 CONFIG_ROCKCHIP_IOMMU=y
 CONFIG_CPU_PX30=y
-CONFIG_CPU_RK1808=y
 CONFIG_CPU_RK3328=y
+CONFIG_CPU_RK3368=y
 CONFIG_CPU_RK3399=y
 CONFIG_CPU_RK3568=y
+CONFIG_ANDROID_VERSION=0x08000000
 CONFIG_ROCKCHIP_PM_DOMAINS=y
 CONFIG_ROCKCHIP_PVTM=y
 CONFIG_ROCKCHIP_SUSPEND_MODE=y
@@ -481,20 +837,15 @@ CONFIG_DEVFREQ_GOV_USERSPACE=y
 CONFIG_ARM_ROCKCHIP_BUS_DEVFREQ=y
 CONFIG_ARM_ROCKCHIP_DMC_DEVFREQ=y
 CONFIG_ARM_ROCKCHIP_DMC_DEBUG=y
-CONFIG_MEMORY=y
+CONFIG_DEVFREQ_EVENT_ROCKCHIP_NOCP=y
 CONFIG_IIO=y
-CONFIG_IIO_BUFFER=y
-CONFIG_IIO_KFIFO_BUF=y
-CONFIG_IIO_TRIGGER=y
+CONFIG_IIO_BUFFER_CB=y
 CONFIG_ROCKCHIP_SARADC=y
-CONFIG_SENSORS_ISL29018=y
-CONFIG_SENSORS_TSL2563=y
-CONFIG_TSL2583=y
-CONFIG_IIO_SYSFS_TRIGGER=y
+CONFIG_INV_MPU6050_I2C=y
+CONFIG_AK09911=y
 CONFIG_PWM=y
 CONFIG_PWM_ROCKCHIP=y
 CONFIG_PHY_ROCKCHIP_CSI2_DPHY=y
-CONFIG_PHY_ROCKCHIP_DP=y
 CONFIG_PHY_ROCKCHIP_EMMC=y
 CONFIG_PHY_ROCKCHIP_INNO_HDMI_PHY=y
 CONFIG_PHY_ROCKCHIP_INNO_MIPI_DPHY=y
@@ -508,73 +859,71 @@ CONFIG_PHY_ROCKCHIP_SNPS_PCIE3=y
 CONFIG_PHY_ROCKCHIP_TYPEC=y
 CONFIG_PHY_ROCKCHIP_USB=y
 CONFIG_ANDROID=y
+CONFIG_ANDROID_BINDER_IPC=y
+CONFIG_ANDROID_BINDERFS=y
 CONFIG_ROCKCHIP_EFUSE=y
 CONFIG_ROCKCHIP_OTP=y
 CONFIG_TEE=y
 CONFIG_OPTEE=y
-CONFIG_RK_FLASH=y
-CONFIG_RK_SFC_NAND=y
-CONFIG_RK_SFC_NAND_MTD=y
-CONFIG_RK_SFC_NOR=y
-CONFIG_RK_SFC_NOR_MTD=y
+CONFIG_RK_NAND=y
 CONFIG_RK_HEADSET=y
 CONFIG_ROCKCHIP_RKNPU=y
 CONFIG_EXT4_FS=y
 CONFIG_EXT4_FS_POSIX_ACL=y
 CONFIG_EXT4_FS_SECURITY=y
-CONFIG_XFS_FS=y
-# CONFIG_DNOTIFY is not set
+CONFIG_EXT4_ENCRYPTION=y
+CONFIG_F2FS_FS=y
+CONFIG_F2FS_FS_SECURITY=y
+CONFIG_F2FS_FS_ENCRYPTION=y
+CONFIG_FS_ENCRYPTION_INLINE_CRYPT=y
+CONFIG_FS_VERITY=y
+CONFIG_FS_VERITY_BUILTIN_SIGNATURES=y
+CONFIG_QUOTA=y
+CONFIG_QUOTA_NETLINK_INTERFACE=y
+CONFIG_QFMT_V2=y
 CONFIG_FUSE_FS=y
+CONFIG_OVERLAY_FS=y
+CONFIG_INCREMENTAL_FS=y
 CONFIG_ISO9660_FS=y
 CONFIG_JOLIET=y
 CONFIG_ZISOFS=y
+CONFIG_UDF_FS=y
+CONFIG_MSDOS_FS=y
 CONFIG_VFAT_FS=y
-CONFIG_FAT_DEFAULT_CODEPAGE=936
-CONFIG_FAT_DEFAULT_IOCHARSET="utf8"
-CONFIG_NTFS_FS=y
 CONFIG_TMPFS=y
 CONFIG_TMPFS_POSIX_ACL=y
-CONFIG_JFFS2_FS=y
-CONFIG_UBIFS_FS=y
-CONFIG_UBIFS_FS_ADVANCED_COMPR=y
-CONFIG_SQUASHFS=y
 CONFIG_PSTORE=y
 CONFIG_PSTORE_CONSOLE=y
+CONFIG_PSTORE_PMSG=y
 CONFIG_PSTORE_RAM=y
-CONFIG_NFS_FS=y
-CONFIG_NFS_V3_ACL=y
-CONFIG_NFS_V4=y
-CONFIG_NFS_SWAP=y
-CONFIG_NLS_DEFAULT="utf8"
 CONFIG_NLS_CODEPAGE_437=y
-CONFIG_NLS_CODEPAGE_936=y
 CONFIG_NLS_ASCII=y
 CONFIG_NLS_ISO8859_1=y
 CONFIG_NLS_UTF8=y
 CONFIG_UNICODE=y
-# CONFIG_CRYPTO_ECHAINIV is not set
-CONFIG_CRYPTO_SHA512=y
+CONFIG_UNICODE_NORMALIZATION_SELFTEST=y
+CONFIG_SECURITY_PERF_EVENTS_RESTRICT=y
+CONFIG_SECURITY=y
+CONFIG_SECURITY_NETWORK=y
+CONFIG_LSM_MMAP_MIN_ADDR=4096
+CONFIG_HARDENED_USERCOPY=y
+CONFIG_STATIC_USERMODEHELPER=y
+CONFIG_STATIC_USERMODEHELPER_PATH=""
+CONFIG_SECURITY_SELINUX=y
+CONFIG_TEE_SUPPORT=y
 CONFIG_CRYPTO_TWOFISH=y
+CONFIG_CRYPTO_LZ4=y
 CONFIG_CRYPTO_ANSI_CPRNG=y
-CONFIG_CRYPTO_USER_API_HASH=y
-CONFIG_CRYPTO_USER_API_SKCIPHER=y
 CONFIG_CRYPTO_DEV_ROCKCHIP=y
-CONFIG_CRC_CCITT=y
-CONFIG_CRC_T10DIF=y
-CONFIG_CRC7=y
-# CONFIG_XZ_DEC_X86 is not set
-# CONFIG_XZ_DEC_POWERPC is not set
-# CONFIG_XZ_DEC_IA64 is not set
-# CONFIG_XZ_DEC_SPARC is not set
 CONFIG_PRINTK_TIME=y
-CONFIG_DYNAMIC_DEBUG=y
 CONFIG_DEBUG_INFO=y
+CONFIG_DEBUG_FS=y
 CONFIG_MAGIC_SYSRQ=y
-CONFIG_MAGIC_SYSRQ_DEFAULT_ENABLE=0
+CONFIG_SOFTLOCKUP_DETECTOR=y
+CONFIG_DEFAULT_HUNG_TASK_TIMEOUT=10
+CONFIG_PANIC_TIMEOUT=5
 CONFIG_SCHEDSTATS=y
-CONFIG_DEBUG_SPINLOCK=y
-CONFIG_DEBUG_CREDENTIALS=y
-CONFIG_RCU_CPU_STALL_TIMEOUT=60
-CONFIG_FUNCTION_TRACER=y
-CONFIG_BLK_DEV_IO_TRACE=y
-CONFIG_LKDTM=y
+CONFIG_SCHED_STACK_END_CHECK=y
+# CONFIG_DEBUG_PREEMPT is not set
+CONFIG_ENABLE_DEFAULT_TRACERS=y
+CONFIG_BUG_ON_DATA_CORRUPTION=y
diff --git a/arch/arm64/configs/tspi_defconfig b/arch/arm64/configs/tspi_defconfig
index 6cd3c5e09934..b0c49e102a21 100755
--- a/arch/arm64/configs/tspi_defconfig
+++ b/arch/arm64/configs/tspi_defconfig
@@ -455,8 +455,9 @@ CONFIG_INPUT_TOUCHSCREEN=y
 CONFIG_TOUCHSCREEN_GSLX6801=y
 CONFIG_TOUCHSCREEN_GSLX680_PAD=y
 CONFIG_TOUCHSCREEN_GSLX680_VR=y
-CONFIG_TOUCHSCREEN_GSL3673=y
-CONFIG_TOUCHSCREEN_GSL3673_800X1280=y
+; CONFIG_TOUCHSCREEN_GSL3673=y
+; CONFIG_TOUCHSCREEN_GSL3673_800X1280=y
+CONFIG_TOUCHSCREEN_CST128A_CUST=y
 CONFIG_TOUCHSCREEN_GSL3676=y
 CONFIG_TOUCHSCREEN_GT9XX=y
 CONFIG_TOUCHSCREEN_HYN_CST2XX=y
@@ -541,6 +542,7 @@ CONFIG_BATTERY_RK817=y
 CONFIG_CHARGER_RK817=y
 CONFIG_BATTERY_RK818=y
 CONFIG_CHARGER_RK818=y
+CONFIG_EC20_POWER=y
 CONFIG_THERMAL=y
 CONFIG_THERMAL_WRITABLE_TRIPS=y
 CONFIG_THERMAL_DEFAULT_GOV_POWER_ALLOCATOR=y
diff --git a/drivers/input/touchscreen/Kconfig b/drivers/input/touchscreen/Kconfig
index ed7e7602924e..43b5bf224a53 100644
--- a/drivers/input/touchscreen/Kconfig
+++ b/drivers/input/touchscreen/Kconfig
@@ -1410,5 +1410,6 @@ config TOUCHSCREEN_FT5436
 	  If unsure, say N.
 
 source "drivers/input/touchscreen/cyttsp5/Kconfig"
+source "drivers/input/touchscreen/cst128a_cust/Kconfig"
 
 endif
diff --git a/drivers/input/touchscreen/Makefile b/drivers/input/touchscreen/Makefile
index effe2cf060ad..f1d1f44e8976 100644
--- a/drivers/input/touchscreen/Makefile
+++ b/drivers/input/touchscreen/Makefile
@@ -128,3 +128,4 @@ obj-$(CONFIG_TOUCHSCREEN_HYN_CST2XX)	+= hyn_cst2xx/
 obj-$(CONFIG_TOUCHSCREEN_FTS)	+= focaltech_touch/
 obj-$(CONFIG_TOUCHSCREEN_FT5436)	+= focaltech_touch_ft5436/
 obj-$(CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5) += cyttsp5/
+obj-$(CONFIG_TOUCHSCREEN_CST128A_CUST) += cst128a_cust/
diff --git a/drivers/input/touchscreen/cst128a_cust/Kconfig b/drivers/input/touchscreen/cst128a_cust/Kconfig
new file mode 100644
index 000000000000..0d601df0c45c
--- /dev/null
+++ b/drivers/input/touchscreen/cst128a_cust/Kconfig
@@ -0,0 +1,7 @@
+config TOUCHSCREEN_CST128A_CUST
+        tristate "CST128A Touchscreen"
+	depends on I2C
+	default n
+	help
+	  Say Y here if you have CST128A touch panel.
+	  If unsure, say N.
\ No newline at end of file
diff --git a/drivers/input/touchscreen/cst128a_cust/Makefile b/drivers/input/touchscreen/cst128a_cust/Makefile
new file mode 100644
index 000000000000..1cb7a4386a2c
--- /dev/null
+++ b/drivers/input/touchscreen/cst128a_cust/Makefile
@@ -0,0 +1 @@
+obj-$(CONFIG_TOUCHSCREEN_CST128A_CUST)   += cst128a_ts.o
diff --git a/drivers/input/touchscreen/cst128a_cust/cst128a_ts.c b/drivers/input/touchscreen/cst128a_cust/cst128a_ts.c
new file mode 100644
index 000000000000..c26fb4886e11
--- /dev/null
+++ b/drivers/input/touchscreen/cst128a_cust/cst128a_ts.c
@@ -0,0 +1,288 @@
+/***************************************************************
+本驱动由正点原子的ft5426驱动修改而来
+ ***************************************************************/
+#include <linux/module.h>
+#include <linux/i2c.h>
+#include <linux/input/mt.h>
+#include <linux/of_gpio.h>
+#include <linux/delay.h>
+#include <linux/interrupt.h>
+
+/* CST128寄存器相关宏定义 */
+#define CST128_DEVIDE_MODE_REG	0x00	// 模式寄存器
+#define CST128_TD_STATUS_REG    	0x02  	// 状态寄存器
+#define CST128_TOUCH_DATA_REG   	0x03   	// 触摸数据读取的起始寄存器
+#define CST128_ID_G_MODE_REG    	0xA4  	// 中断模式寄存器
+
+#define MAX_SUPPORT_POINTS		5    	// cst128最大支持5点触摸
+
+#define TOUCH_EVENT_DOWN      	0x00    // 按下
+#define TOUCH_EVENT_UP           	0x01    // 抬起
+#define TOUCH_EVENT_ON         	0x02    // 接触
+#define TOUCH_EVENT_RESERVED  	0x03    // 保留
+
+
+struct hyn_cst128_dev {
+    struct i2c_client *client;
+    struct input_dev *input;
+    int reset_gpio;
+    int irq_gpio;
+};
+
+static int hyn_cst128_ts_write(struct hyn_cst128_dev *cst128,
+            u8 addr, u8 *buf, u16 len)
+{
+    struct i2c_client *client = cst128->client;
+    struct i2c_msg msg;
+    u8 send_buf[6] = {0};
+    int ret;
+
+    send_buf[0] = addr;
+    memcpy(&send_buf[1], buf, len);
+
+    msg.flags = 0;                  //i2c写
+    msg.addr = client->addr;
+    msg.buf = send_buf;
+    msg.len = len + 1;
+
+    ret = i2c_transfer(client->adapter, &msg, 1);
+    if (1 == ret)
+        return 0;
+    else {
+        dev_err(&client->dev, "%s: write error, addr=0x%x len=%d.\n",
+                    __func__, addr, len);
+        return -1;
+    }
+}
+
+static int hyn_cst128_ts_read(struct hyn_cst128_dev *cst128,
+            u8 addr, u8 *buf, u16 len)
+{
+    struct i2c_client *client = cst128->client;
+    struct i2c_msg msg[2];
+    int ret;
+
+    msg[0].flags = 0;             	// i2c写
+    msg[0].addr = client->addr;
+    msg[0].buf = &addr;
+    msg[0].len = 1;              	// 1个字节
+
+    msg[1].flags = I2C_M_RD;    	//i2c读
+    msg[1].addr = client->addr;
+    msg[1].buf = buf;
+    msg[1].len = len;
+
+    ret = i2c_transfer(client->adapter, msg, 2);
+    if (2 == ret)
+        return 0;
+    else {
+        dev_err(&client->dev, "%s: read error, addr=0x%x len=%d.\n",
+                    __func__, addr, len);
+        return -1;
+    }
+}
+
+static int hyn_cst128_ts_reset(struct hyn_cst128_dev *cst128)
+{
+    struct i2c_client *client = cst128->client;
+    int ret;
+
+    /* 从设备树中获取复位管脚 */
+    cst128->reset_gpio = of_get_named_gpio(client->dev.of_node, "reset-gpios", 0);
+    if (!gpio_is_valid(cst128->reset_gpio)) {
+        dev_err(&client->dev, "Failed to get ts reset gpio\n");
+        return cst128->reset_gpio;
+    }
+
+    /* 申请使用管脚 */
+    ret = devm_gpio_request_one(&client->dev, cst128->reset_gpio,
+                GPIOF_OUT_INIT_HIGH, "cst128 reset");
+    if (ret < 0)
+        return ret;
+
+    msleep(20);
+    gpio_set_value_cansleep(cst128->reset_gpio, 0);    	// 拉低复位引脚
+    msleep(5);
+    gpio_set_value_cansleep(cst128->reset_gpio, 1);   	// 拉高复位引脚，结束复位
+
+    return 0;
+}
+
+static irqreturn_t hyn_cst128_ts_isr(int irq, void *dev_id)
+{
+    struct hyn_cst128_dev *cst128 = dev_id;
+    u8 rdbuf[30] = {0};
+    int i, type, x, y, id;
+    bool down;
+    int ret;
+
+    /* 读取CST128触摸点坐标从0x02寄存器开始，连续读取29个寄存器 */
+    ret = hyn_cst128_ts_read(cst128, CST128_TD_STATUS_REG, rdbuf, 29);
+    if (ret)
+        goto out;
+
+    for (i = 0; i < MAX_SUPPORT_POINTS; i++) {
+
+        u8 *buf = &rdbuf[i * 6 + 1];
+
+        /* 以第一个触摸点为例，寄存器TOUCH1_XH(地址0x03)，各bit位描述如下：
+         * bit7:6  Event flag  0:按下 1:释放 2:接触 3:没有事件
+         * bit5:4  保留
+         * bit3:0  X轴触摸点的11~8位
+         */
+        type = buf[0] >> 6;                     // 获取触摸点的Event Flag
+        if (type == TOUCH_EVENT_RESERVED)
+            continue;
+
+        y = ((buf[2] << 8) | buf[3]) & 0x0fff;
+        x = (((buf[0] << 8) | buf[1]) & 0x0fff);
+        x = 480 - x;
+
+        /* 以第一个触摸点为例，寄存器TOUCH1_YH(地址0x05)，各bit位描述如下：
+         * bit7:4  Touch ID  触摸ID，表示是哪个触摸点
+         * bit3:0  Y轴触摸点的11~8位。
+         */
+        id = (buf[2] >> 4) & 0x0f;
+        down = type != TOUCH_EVENT_UP;
+
+        input_mt_slot(cst128->input, id);
+        input_mt_report_slot_state(cst128->input, MT_TOOL_FINGER, down);
+
+        if (!down)
+            continue;
+
+        input_report_abs(cst128->input, ABS_MT_POSITION_X, x);
+        input_report_abs(cst128->input, ABS_MT_POSITION_Y, y);
+    }
+
+    input_mt_report_pointer_emulation(cst128->input, true);
+    input_sync(cst128->input);
+
+out:
+    return IRQ_HANDLED;
+}
+
+static int hyn_cst128_ts_irq(struct hyn_cst128_dev *cst128)
+{
+    struct i2c_client *client = cst128->client;
+    int ret;
+
+    /* 从设备树中获取中断管脚 */
+    cst128->irq_gpio = of_get_named_gpio(client->dev.of_node, "irq-gpios", 0);
+    if (!gpio_is_valid(cst128->irq_gpio)) {
+        dev_err(&client->dev, "Failed to get ts interrupt gpio\n");
+        return cst128->irq_gpio;
+    }
+
+    /* 申请使用管脚 */
+    ret = devm_gpio_request_one(&client->dev, cst128->irq_gpio,
+                GPIOF_IN, "cst128 interrupt");
+    if (ret < 0)
+        return ret;
+
+    /* 注册中断服务函数 */
+    ret = devm_request_threaded_irq(&client->dev, gpio_to_irq(cst128->irq_gpio),
+                NULL, hyn_cst128_ts_isr, IRQF_TRIGGER_FALLING | IRQF_ONESHOT,
+                client->name, cst128);
+    if (ret) {
+        dev_err(&client->dev, "Failed to request touchscreen IRQ.\n");
+        return ret;
+    }
+
+    return 0;
+}
+
+static int hyn_cst128_ts_probe(struct i2c_client *client,
+            const struct i2c_device_id *id)
+{
+    struct hyn_cst128_dev *cst128;
+    struct input_dev *input;
+    u8 data;
+    int ret;
+
+    /* 实例化一个struct hyn_cst128_dev对象 */
+    cst128 = devm_kzalloc(&client->dev, sizeof(struct hyn_cst128_dev), GFP_KERNEL);
+    if (!cst128) {
+        dev_err(&client->dev, "Failed to allocate cst128 driver data.\n");
+        return -ENOMEM;
+    }
+
+    cst128->client = client;
+
+    /* 复位CST128触摸芯片 */
+    ret = hyn_cst128_ts_reset(cst128);
+    if (ret)
+        return ret;
+
+    msleep(5);
+
+    /* 初始化CST128 */
+    data = 0;
+    hyn_cst128_ts_write(cst128, CST128_DEVIDE_MODE_REG, &data, 1);
+    data = 1;
+    hyn_cst128_ts_write(cst128, CST128_ID_G_MODE_REG, &data, 1);
+
+    /* 申请、注册中断服务函数 */
+    ret = hyn_cst128_ts_irq(cst128);
+    if (ret)
+        return ret;
+
+    /* 注册input设备 */
+    input = devm_input_allocate_device(&client->dev);
+    if (!input) {
+        dev_err(&client->dev, "Failed to allocate input device.\n");
+        return -ENOMEM;
+    }
+
+    cst128->input = input;
+    input->name = "CST128 TouchScreen";
+    input->id.bustype = BUS_I2C;
+
+    input_set_abs_params(input, ABS_MT_POSITION_X,
+                0, 480, 0, 0);
+    input_set_abs_params(input, ABS_MT_POSITION_Y,
+                0, 800, 0, 0);
+
+    ret = input_mt_init_slots(input, MAX_SUPPORT_POINTS, INPUT_MT_DIRECT);
+    if (ret) {
+        dev_err(&client->dev, "Failed to init MT slots.\n");
+        return ret;
+    }
+
+    ret = input_register_device(input);
+    if (ret)
+        return ret;
+
+    i2c_set_clientdata(client, cst128);
+    return 0;
+}
+
+static int hyn_cst128_ts_remove(struct i2c_client *client)
+{
+    struct hyn_cst128_dev *cst128 = i2c_get_clientdata(client);
+    input_unregister_device(cst128->input);
+    return 0;
+}
+
+static const struct of_device_id hyn_cst128_of_match[] = {
+    { .compatible = "hyn,cst128a", },
+    { /* sentinel */ }
+};
+MODULE_DEVICE_TABLE(of, hyn_cst128_of_match);
+
+static struct i2c_driver hyn_cst128_ts_driver = {
+    .driver = {
+        .owner     		= THIS_MODULE,
+        .name          	= "hyn_cst128a",
+        .of_match_table	= of_match_ptr(hyn_cst128_of_match),
+    },
+    .probe    = hyn_cst128_ts_probe,
+    .remove   = hyn_cst128_ts_remove,
+};
+
+module_i2c_driver(hyn_cst128_ts_driver);
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("leefei");
+MODULE_INFO(intree, "Y");
+
diff --git a/drivers/power/supply/Kconfig b/drivers/power/supply/Kconfig
index ab9fdd0721bc..2dacadb793da 100644
--- a/drivers/power/supply/Kconfig
+++ b/drivers/power/supply/Kconfig
@@ -695,4 +695,6 @@ config CHARGER_RK818
 	  If you say yes here you will get support for the charger of RK818 PMIC.
 	  This driver can give support for Rk818 Charger Interface.
 
+source "drivers/power/supply/ec20_power/Kconfig"
+
 endif # POWER_SUPPLY
diff --git a/drivers/power/supply/Makefile b/drivers/power/supply/Makefile
index 4e8be4a2f1e0..1acf518a0b66 100644
--- a/drivers/power/supply/Makefile
+++ b/drivers/power/supply/Makefile
@@ -92,3 +92,4 @@ obj-$(CONFIG_BATTERY_RK817)	+= rk817_battery.o
 obj-$(CONFIG_CHARGER_RK817)	+= rk817_charger.o
 obj-$(CONFIG_BATTERY_RK818)	+= rk818_battery.o
 obj-$(CONFIG_CHARGER_RK818)	+= rk818_charger.o
+obj-$(CONFIG_EC20_POWER) += ec20_power/
\ No newline at end of file
diff --git a/drivers/power/supply/ec20_power/Kconfig b/drivers/power/supply/ec20_power/Kconfig
new file mode 100644
index 000000000000..e24214d7bc2e
--- /dev/null
+++ b/drivers/power/supply/ec20_power/Kconfig
@@ -0,0 +1,7 @@
+config EC20_POWER
+        tristate "EC20 POWER"
+	depends on GPIOLIB
+	default n
+	help
+	  Say Y here if you have EC20 module.
+	  If unsure, say N.
\ No newline at end of file
diff --git a/drivers/power/supply/ec20_power/Makefile b/drivers/power/supply/ec20_power/Makefile
new file mode 100644
index 000000000000..6cd90188504f
--- /dev/null
+++ b/drivers/power/supply/ec20_power/Makefile
@@ -0,0 +1 @@
+obj-$(CONFIG_EC20_POWER) += ec20_power.o
diff --git a/drivers/power/supply/ec20_power/ec20_power.c b/drivers/power/supply/ec20_power/ec20_power.c
new file mode 100644
index 000000000000..96627e0db44b
--- /dev/null
+++ b/drivers/power/supply/ec20_power/ec20_power.c
@@ -0,0 +1,250 @@
+#include <linux/types.h>
+#include <linux/kernel.h>
+#include <linux/delay.h>
+#include <linux/ide.h>
+#include <linux/init.h>
+#include <linux/module.h>
+#include <linux/errno.h>
+#include <linux/gpio.h>
+#include <linux/cdev.h>
+#include <linux/device.h>
+#include <linux/of.h>
+#include <linux/of_address.h>
+#include <linux/of_gpio.h>
+#include <asm/uaccess.h>
+#include <asm/io.h>
+/***************************************************************
+文件名   	: ec20_power.c
+作者      	: 千古长夜
+版本      	: V1.0
+描述      	: EC20 4g模块电源控制。
+***************************************************************/
+#define EC20POWER_CNT      		1           	/* 设备号个数 	*/
+#define EC20POWER_NAME        	"ec20_power" 	/* 名字 		*/
+#define EC20POWEROFF              	0           /* 关灯 			*/
+#define EC20POWERON               	1           /* 开灯 			*/
+
+/* ec20_power设备结构体 */
+struct ec20_power_dev{
+    dev_t devid;          		/* 设备号     	*/
+    struct cdev cdev;    		/* cdev     	*/
+    struct class *class;  	    /* 类      		*/
+    struct device *device;  	/* 设备    		*/
+    int major;              	/* 主设备号   	*/
+    int minor;              	/* 次设备号   	*/
+    struct device_node  *nd;    /* 设备节点 	*/
+    int pwd_gpio;           	/* ec20power所使用的GPIO编号   */
+};
+
+struct ec20_power_dev ec20_power; /* ec20power设备 	*/
+
+/*
+ * @description  	: 打开设备
+ * @param – inode	: 传递给驱动的inode
+ * @param - filp 	: 设备文件，file结构体有个叫做private_data的成员变量
+ *                    一般在open的时候将private_data指向设备结构体。
+ * @return       	: 0 成功;其他 失败
+ */
+static int ec20power_open(struct inode *inode, struct file *filp)
+{
+    filp->private_data = &ec20_power; /* 设置私有数据 */
+    return 0;
+}
+
+/*
+ * @description   : 从设备读取数据 
+ * @param - filp 	: 要打开的设备文件(文件描述符)
+ * @param - buf  	: 返回给用户空间的数据缓冲区
+ * @param - cnt  	: 要读取的数据长度
+ * @param - offt 	: 相对于文件首地址的偏移
+ * @return        	: 读取的字节数，如果为负值，表示读取失败
+ */
+static ssize_t ec20power_read(struct file *filp, char __user *buf, size_t cnt, loff_t *offt)
+{
+    return 0;
+}
+
+/*
+ * @description 	: 向设备写数据 
+ * @param - filp 	: 设备文件，表示打开的文件描述符
+ * @param - buf  	: 要写给设备写入的数据
+ * @param - cnt  	: 要写入的数据长度
+ * @param - offt 	: 相对于文件首地址的偏移
+ * @return        	: 写入的字节数，如果为负值，表示写入失败
+ */
+static ssize_t ec20power_write(struct file *filp, const char __user *buf, 
+		                         size_t cnt, loff_t *offt)
+{
+    int retvalue;
+    unsigned char databuf[1];
+    unsigned char ec20powerstat;
+    struct ec20_power_dev *dev = filp->private_data;
+
+    retvalue = copy_from_user(databuf, buf, cnt); 
+    if(retvalue < 0) {
+        printk("kernel write failed!\r\n");
+        return -EFAULT;
+    }
+
+    ec20powerstat = databuf[0];       /* 获取状态值 */
+
+    if(ec20powerstat == EC20POWERON) {  
+        gpio_set_value(dev->pwd_gpio, 1);   /* 打开EC20POWER */
+    } else if(ec20powerstat == EC20POWEROFF) {
+        gpio_set_value(dev->pwd_gpio, 0);   /* 关闭EC20POWER */
+    }
+    return 0;
+}
+
+/*
+ * @description   : 关闭/释放设备
+ * @param - filp 	: 要关闭的设备文件(文件描述符)
+ * @return        	: 0 成功;其他 失败
+ */
+static int ec20power_release(struct inode *inode, struct file *filp)
+{
+    return 0;
+}
+
+/* 设备操作函数 */
+static struct file_operations ec20_power_fops = {
+    .owner = THIS_MODULE,
+    .open = ec20power_open,
+    .read = ec20power_read,
+    .write = ec20power_write,
+    .release =  ec20power_release,
+};
+
+/*
+ * @description 	: 驱动出口函数
+ * @param       	: 无
+ * @return      	: 无
+ */
+static int __init ec20power_init(void)
+{
+    int ret = 0;
+    const char *str;
+
+    /* 设置所使用的GPIO */
+    /* 1、获取设备节点：ec20_power */
+    ec20_power.nd = of_find_node_by_path("/ec20_power");
+    if(ec20_power.nd == NULL) {
+        printk("ec20_power node not find!\r\n");
+        return -EINVAL;
+    }
+
+    /* 2.读取status属性 */
+    ret = of_property_read_string(ec20_power.nd, "status", &str);
+    if(ret < 0) 
+        return -EINVAL;
+
+    if (strcmp(str, "okay"))
+        return -EINVAL;
+    
+    /* 3、获取compatible属性值并进行匹配 */
+    ret = of_property_read_string(ec20_power.nd, "compatible", &str);
+    if(ret < 0) {
+        printk("ec20_power: Failed to get compatible property\n");
+        return -EINVAL;
+    }
+
+    if (strcmp(str, "ec20_power")) {
+        printk("ec20_power: Compatible match failed\n");
+        return -EINVAL;
+    }
+
+    /* 4、 获取设备树中的gpio属性，得到所使用的编号 */
+    ec20_power.pwd_gpio = of_get_named_gpio(ec20_power.nd, "ec20power-gpio", 0);
+    if(ec20_power.pwd_gpio < 0) {
+        printk("can't get ec20power-gpio");
+        return -EINVAL;
+    }
+    printk("ec20power-gpio num = %d\r\n", ec20_power.pwd_gpio);
+
+    /* 5.向gpio子系统申请使用GPIO */
+    ret = gpio_request(ec20_power.pwd_gpio, "EC20POWER-GPIO");
+    if (ret) {
+        printk(KERN_ERR "ec20_power: Failed to request ec20power-gpio\n");
+        return ret;
+    }
+
+    /* 6、设置GPIO为输出，并且输出高电平，默认开启EC20 */
+    ret = gpio_direction_output(ec20_power.pwd_gpio, 1);
+    if(ret < 0) {
+        printk("can't set gpio!\r\n");
+    }
+
+    /* 注册字符设备驱动 */
+    /* 1、创建设备号 */
+    if (ec20_power.major) {        /*  定义了设备号 */
+        ec20_power.devid = MKDEV(ec20_power.major, 0);
+        ret = register_chrdev_region(ec20_power.devid, EC20POWER_CNT, EC20POWER_NAME);
+        if(ret < 0) {
+            pr_err("cannot register %s char driver [ret=%d]\n", EC20POWER_NAME, EC20POWER_CNT);
+            goto free_gpio;
+        }
+    } else {                        /* 没有定义设备号 */
+        ret = alloc_chrdev_region(&ec20_power.devid, 0, EC20POWER_CNT, EC20POWER_NAME);    /* 申请设备号 */
+        if(ret < 0) {
+            pr_err("%s Couldn't alloc_chrdev_region, ret=%d\r\n", EC20POWER_NAME, ret);
+            goto free_gpio;
+        }
+        ec20_power.major = MAJOR(ec20_power.devid); /* 获取分配号的主设备号 */
+        ec20_power.minor = MINOR(ec20_power.devid); /* 获取分配号的次设备号 */
+    }
+    printk("ec20_power major=%d,minor=%d\r\n",ec20_power.major, ec20_power.minor);   
+    
+    /* 2、初始化cdev */
+    ec20_power.cdev.owner = THIS_MODULE;
+    cdev_init(&ec20_power.cdev, &ec20_power_fops);
+    
+    /* 3、添加一个cdev */
+    cdev_add(&ec20_power.cdev, ec20_power.devid, EC20POWER_CNT);
+    if(ret < 0)
+        goto del_unregister;
+        
+    /* 4、创建类 */
+    ec20_power.class = class_create(THIS_MODULE, EC20POWER_NAME);
+    if (IS_ERR(ec20_power.class)) {
+        goto del_cdev;
+    }
+
+    /* 5、创建设备 */
+    ec20_power.device = device_create(ec20_power.class, NULL, ec20_power.devid, NULL, EC20POWER_NAME);
+    if (IS_ERR(ec20_power.device)) {
+        goto destroy_class;
+    }
+    return 0;
+    
+destroy_class:
+    class_destroy(ec20_power.class);
+del_cdev:
+    cdev_del(&ec20_power.cdev);
+del_unregister:
+    unregister_chrdev_region(ec20_power.devid, EC20POWER_CNT);
+free_gpio:
+    gpio_free(ec20_power.pwd_gpio);
+    return -EIO;
+}
+
+/*
+ * @description 	: 驱动出口函数
+ * @param       	: 无
+ * @return      	: 无
+ */
+static void __exit ec20power_exit(void)
+{
+    /* 注销字符设备驱动 */
+    cdev_del(&ec20_power.cdev);/*  删除cdev */
+    unregister_chrdev_region(ec20_power.devid, EC20POWER_CNT);
+    device_destroy(ec20_power.class, ec20_power.devid);/* 注销设备 */
+    class_destroy(ec20_power.class);/* 注销类 		*/
+    gpio_free(ec20_power.pwd_gpio); /* 释放GPIO 	*/
+}
+
+module_init(ec20power_init);
+module_exit(ec20power_exit);
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("YOUMENG");
+MODULE_INFO(intree, "Y");
+
-- 
2.17.1


From 2e702ae30c046fa934245e99cf1d2ddc9d6d3b75 Mon Sep 17 00:00:00 2001
From: YouMeng <36076779@qq.com>
Date: Mon, 29 Jul 2024 16:30:02 +0800
Subject: [PATCH 2/4] =?UTF-8?q?=E4=BF=AE=E6=AD=A3=E5=B0=8F=E6=B5=B7?=
 =?UTF-8?q?=E8=B1=9A=E6=89=8B=E6=9C=BA=E9=94=82=E7=94=B5=E6=B1=A0=E7=94=B5?=
 =?UTF-8?q?=E9=87=8F=E6=98=BE=E7=A4=BA=E9=97=AE=E9=A2=98=EF=BC=9A=E5=88=A0?=
 =?UTF-8?q?=E9=99=A4=E6=97=A0=E5=85=B3=E7=94=B5=E6=B1=A0=E3=80=81=E5=85=85?=
 =?UTF-8?q?=E7=94=B5=E9=A9=B1=E5=8A=A8?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I9fd8bc1bb9e9c6deeaa390aaa56594841d99d196
---
 arch/arm64/configs/rockchip_linux_defconfig | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/arch/arm64/configs/rockchip_linux_defconfig b/arch/arm64/configs/rockchip_linux_defconfig
index 8de9d56624a2..e52a3365521d 100644
--- a/arch/arm64/configs/rockchip_linux_defconfig
+++ b/arch/arm64/configs/rockchip_linux_defconfig
@@ -518,13 +518,7 @@ CONFIG_POWER_AVS=y
 CONFIG_ROCKCHIP_IODOMAIN=y
 CONFIG_POWER_RESET_GPIO=y
 CONFIG_SYSCON_REBOOT_MODE=y
-CONFIG_TEST_POWER=y
-CONFIG_CHARGER_BQ25700=y
 CONFIG_BATTERY_CW2015=y
-CONFIG_BATTERY_RK817=y
-CONFIG_CHARGER_RK817=y
-CONFIG_BATTERY_RK818=y
-CONFIG_CHARGER_RK818=y
 CONFIG_EC20_POWER=y
 CONFIG_THERMAL=y
 CONFIG_THERMAL_WRITABLE_TRIPS=y
-- 
2.17.1


From 66ce752f87c2ecfac46ba2ced250e7a02831b94a Mon Sep 17 00:00:00 2001
From: YouMeng <36076779@qq.com>
Date: Mon, 29 Jul 2024 17:34:30 +0800
Subject: [PATCH 3/4] =?UTF-8?q?=E6=B7=BB=E5=8A=A0=E5=85=85=E7=94=B5?=
 =?UTF-8?q?=E6=A3=80=E6=B5=8B=E5=BC=95=E8=84=9AGPIO4=20PA0?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I2792911ac4b190079013ea424d3e632c0d9536e3
---
 .../boot/dts/rockchip/tspi-rk3566-user-v10.dts      | 13 +++++++++++++
 arch/arm64/configs/rockchip_linux_defconfig         |  1 +
 2 files changed, 14 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
index bb08df745b3e..ddb94d27b82f 100755
--- a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
+++ b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
@@ -118,6 +118,14 @@
 			linux,code = <KEY_VOLUMEDOWN>;
 		};
 	};
+
+	gpio-charger {
+		compatible = "gpio-charger";
+		charger-type = "mains";
+		gpios = <&gpio4 RK_PA0 GPIO_ACTIVE_LOW>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&ac_present_ap>;
+	};
 };
 
 &pinctrl {
@@ -146,6 +154,11 @@
 			rockchip,pins = <0 RK_PC7 RK_FUNC_GPIO &pcfg_pull_up>;
 		};
 	};
+	charger {
+		ac_present_ap: ac-present-ap {
+			rockchip,pins = <4 RK_PA0 RK_FUNC_GPIO &pcfg_pull_up>;
+		};
+	};
 };
 
 //用户三色灯
diff --git a/arch/arm64/configs/rockchip_linux_defconfig b/arch/arm64/configs/rockchip_linux_defconfig
index e52a3365521d..a738a380ef0a 100644
--- a/arch/arm64/configs/rockchip_linux_defconfig
+++ b/arch/arm64/configs/rockchip_linux_defconfig
@@ -518,6 +518,7 @@ CONFIG_POWER_AVS=y
 CONFIG_ROCKCHIP_IODOMAIN=y
 CONFIG_POWER_RESET_GPIO=y
 CONFIG_SYSCON_REBOOT_MODE=y
+CONFIG_CHARGER_GPIO=y
 CONFIG_BATTERY_CW2015=y
 CONFIG_EC20_POWER=y
 CONFIG_THERMAL=y
-- 
2.17.1


From 3736dad9f9ca1b4fc9df8ae5614d3d6f63462beb Mon Sep 17 00:00:00 2001
From: YouMeng <36076779@qq.com>
Date: Wed, 21 Aug 2024 22:19:16 +0800
Subject: [PATCH 4/4] =?UTF-8?q?=E5=AF=B9=E5=BA=94=E7=A1=AC=E4=BB=B6V4.1?=
 =?UTF-8?q?=E7=89=88=E6=9C=AC,=E4=BF=AE=E6=94=B9=E4=BC=A0=E6=84=9F?=
 =?UTF-8?q?=E5=99=A8=E6=96=B9=E5=90=91,=E8=B0=83=E6=95=B4=E7=86=84?=
 =?UTF-8?q?=E5=B1=8F=E6=8C=89=E9=94=AE=E5=BB=B6=E6=97=B6?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: I718678bd697e11e3df11e573116481de52c81994

修正锂电池检测失效问题

Change-Id: I8f65ae6f99eb8ca4f1e2dccd288ba9cc76f6cbae
---
 .../dts/rockchip/tspi-rk3566-user-v10.dts     | 53 +++++++------------
 arch/arm64/configs/rockchip_linux_defconfig   |  1 -
 arch/arm64/configs/tspi_defconfig             | 46 +++-------------
 drivers/input/sensors/compass/Kconfig         |  2 +-
 4 files changed, 26 insertions(+), 76 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
index ddb94d27b82f..7ad95a4219a3 100755
--- a/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
+++ b/arch/arm64/boot/dts/rockchip/tspi-rk3566-user-v10.dts
@@ -102,7 +102,7 @@
 			label = "GPIO Key Power";
 			gpios = <&gpio0 RK_PA5 GPIO_ACTIVE_LOW>;
 			linux,code = <KEY_POWER>;
-			debounce-interval = <100>;
+			debounce-interval = <10>;
 			wakeup-source;
 		};
 
@@ -122,7 +122,7 @@
 	gpio-charger {
 		compatible = "gpio-charger";
 		charger-type = "mains";
-		gpios = <&gpio4 RK_PA0 GPIO_ACTIVE_LOW>;
+		gpios = <&gpio4 RK_PA2 GPIO_ACTIVE_LOW>;
 		pinctrl-names = "default";
 		pinctrl-0 = <&ac_present_ap>;
 	};
@@ -140,6 +140,11 @@
 			rockchip,pins = <3 RK_PD7 RK_FUNC_GPIO &pcfg_pull_none>;
 		};
 	};
+	ak8963 {
+		ak8963_irq_gpio: ak8963_irq_gpio {
+			rockchip,pins = <4 RK_PA3 RK_FUNC_GPIO &pcfg_pull_none>;
+		};
+	};
 
 	keys {
 		pwr_key: pwr-key {
@@ -156,7 +161,7 @@
 	};
 	charger {
 		ac_present_ap: ac-present-ap {
-			rockchip,pins = <4 RK_PA0 RK_FUNC_GPIO &pcfg_pull_up>;
+			rockchip,pins = <4 RK_PA2 RK_FUNC_GPIO &pcfg_pull_up>;
 		};
 	};
 };
@@ -190,7 +195,7 @@
 		irq_enable = <0>;
 		poll_delay_ms = <30>;
 		type = <SENSOR_TYPE_ACCEL>;
-		layout = <5>;
+		layout = <6>;
 	};
 
 	mpu6050_gyro: mpu-gyro@68 {
@@ -200,17 +205,20 @@
 		irq_enable = <0>;
 		poll_delay_ms = <30>;
 		type = <SENSOR_TYPE_GYROSCOPE>;
-		layout = <5>;
+		layout = <6>;
 	};
 
-	ak09918_compass: ak09918_compass@c {
-		compatible = "ak09911";
-		reg = <0x0c>;
+	ak8963_compass: ak8963-compass@0d {
+		status = "okay";
+		compatible = "ak8963";
+		pinctrl-names = "default";
+		pinctrl-0 = <&ak8963_irq_gpio>;
+		reg = <0x0d>;
 		type = <SENSOR_TYPE_COMPASS>;
+		irq-gpio = <&gpio4 RK_PA3 IRQ_TYPE_EDGE_RISING>;
 		irq_enable = <0>;
 		poll_delay_ms = <30>;
-		layout = <1>;
-		status = "okay";
+		layout = <5>; 
 	};
 
 	cw2015@62 {
@@ -234,31 +242,6 @@
 &i2c2 {
 	status = "okay";
 
-	/*添加你的I2C设备参考
-	gt1x: gt1x@14 {
-		compatible = "goodix,gt1x";
-		reg = <0x14>;
-		pinctrl-names = "default";
-		pinctrl-0 = <&touch_gpio>;
-		goodix,rst-gpio = <&gpio0 RK_PB6 GPIO_ACTIVE_HIGH>;
-		goodix,irq-gpio = <&gpio0 RK_PB5 IRQ_TYPE_LEVEL_LOW>;
-	};*/
-	// mpu6050@68 {
-	// 	compatible = "invensense,mpu6050";
-	// 	status = "okay";
-	// 	pinctrl-names = "default";
-	// 	pinctrl-0 = <&mpu6050_irq_gpio>;
-	// 	reg = <0x68>;
-	// 	irq-gpio = <&gpio3 RK_PA1 IRQ_TYPE_EDGE_RISING>;
-	// 	mpu-int_config = <0x10>;
-	// 	mpu-level_shifter = <0>;
-	// 	mpu-orientation = <0 1 0 1 0 0 0 0 1>;
-	// 	orientation-x= <0>;
-	// 	orientation-y= <1>;
-	// 	orientation-z= <0>;
-	// 	support-hw-poweroff = <0>;
-	// 	mpu-debug = <0>;
-	// };
 };
 
 &i2c3 {
diff --git a/arch/arm64/configs/rockchip_linux_defconfig b/arch/arm64/configs/rockchip_linux_defconfig
index a738a380ef0a..2e1e01ffe8a4 100644
--- a/arch/arm64/configs/rockchip_linux_defconfig
+++ b/arch/arm64/configs/rockchip_linux_defconfig
@@ -837,7 +837,6 @@ CONFIG_IIO=y
 CONFIG_IIO_BUFFER_CB=y
 CONFIG_ROCKCHIP_SARADC=y
 CONFIG_INV_MPU6050_I2C=y
-CONFIG_AK09911=y
 CONFIG_PWM=y
 CONFIG_PWM_ROCKCHIP=y
 CONFIG_PHY_ROCKCHIP_CSI2_DPHY=y
diff --git a/arch/arm64/configs/tspi_defconfig b/arch/arm64/configs/tspi_defconfig
index b0c49e102a21..2e1e01ffe8a4 100755
--- a/arch/arm64/configs/tspi_defconfig
+++ b/arch/arm64/configs/tspi_defconfig
@@ -1,17 +1,3 @@
-#********************************************************************
-#           立创开发板不靠卖板赚钱，以培养中国工程师为己任          
-#         泰山派软硬件资料与相关扩展板软硬件资料官网全部开源		 
-#                      开发板官网：www.lckfb.com                    
-#                     立创论坛：oshwhub.com/forum                   
-#            关注B站：【立创开发板】，掌握我们的最新动态！          
-#********************************************************************
-# 文件名：tspi_defconfig.dtsi
-# 描述：
-# 更新:
-# 时间           作者           说明
-# 2023-07-21    吴才成         v1.0.0
-#********************************************************************/
-
 # CONFIG_LOCALVERSION_AUTO is not set
 CONFIG_AUDIT=y
 # CONFIG_AUDITSYSCALL is not set
@@ -26,7 +12,7 @@ CONFIG_TASK_IO_ACCOUNTING=y
 CONFIG_PSI=y
 CONFIG_IKCONFIG=y
 CONFIG_IKCONFIG_PROC=y
-CONFIG_IKHEADERS=m
+CONFIG_IKHEADERS=y
 CONFIG_LOG_BUF_SHIFT=19
 CONFIG_CGROUPS=y
 CONFIG_MEMCG=y
@@ -406,8 +392,6 @@ CONFIG_USB_EPSON2888=y
 CONFIG_USB_KC2190=y
 CONFIG_USB_NET_CX82310_ETH=y
 CONFIG_USB_NET_KALMIA=y
-#4G EC20, wucaicheng,1378913492@qq.com,20230817
-# CONFIG_USB_NET_QMI_WWAN is not set
 CONFIG_USB_HSO=y
 CONFIG_USB_NET_INT51X1=y
 CONFIG_USB_IPHETH=y
@@ -455,9 +439,6 @@ CONFIG_INPUT_TOUCHSCREEN=y
 CONFIG_TOUCHSCREEN_GSLX6801=y
 CONFIG_TOUCHSCREEN_GSLX680_PAD=y
 CONFIG_TOUCHSCREEN_GSLX680_VR=y
-; CONFIG_TOUCHSCREEN_GSL3673=y
-; CONFIG_TOUCHSCREEN_GSL3673_800X1280=y
-CONFIG_TOUCHSCREEN_CST128A_CUST=y
 CONFIG_TOUCHSCREEN_GSL3676=y
 CONFIG_TOUCHSCREEN_GT9XX=y
 CONFIG_TOUCHSCREEN_HYN_CST2XX=y
@@ -469,6 +450,7 @@ CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_DEVICETREE_SUPPORT=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_I2C=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_DEVICE_ACCESS=y
 CONFIG_TOUCHSCREEN_CYPRESS_CYTTSP5_LOADER=y
+CONFIG_TOUCHSCREEN_CST128A_CUST=y
 CONFIG_ROCKCHIP_REMOTECTL=y
 CONFIG_ROCKCHIP_REMOTECTL_PWM=y
 CONFIG_SENSOR_DEVICE=y
@@ -512,6 +494,7 @@ CONFIG_INPUT_RK805_PWRKEY=y
 # CONFIG_SERIO is not set
 # CONFIG_VT is not set
 # CONFIG_LEGACY_PTYS is not set
+# CONFIG_DEVMEM is not set
 CONFIG_SERIAL_8250=y
 # CONFIG_SERIAL_8250_DEPRECATED_OPTIONS is not set
 CONFIG_SERIAL_8250_CONSOLE=y
@@ -535,13 +518,8 @@ CONFIG_POWER_AVS=y
 CONFIG_ROCKCHIP_IODOMAIN=y
 CONFIG_POWER_RESET_GPIO=y
 CONFIG_SYSCON_REBOOT_MODE=y
-CONFIG_TEST_POWER=y
-CONFIG_CHARGER_BQ25700=y
+CONFIG_CHARGER_GPIO=y
 CONFIG_BATTERY_CW2015=y
-CONFIG_BATTERY_RK817=y
-CONFIG_CHARGER_RK817=y
-CONFIG_BATTERY_RK818=y
-CONFIG_CHARGER_RK818=y
 CONFIG_EC20_POWER=y
 CONFIG_THERMAL=y
 CONFIG_THERMAL_WRITABLE_TRIPS=y
@@ -628,11 +606,6 @@ CONFIG_MALI450=y
 CONFIG_MALI_SHARED_INTERRUPTS=y
 CONFIG_MALI_DT=y
 CONFIG_MALI_DEVFREQ=y
-CONFIG_MALI_MIDGARD=y
-CONFIG_MALI_EXPERT=y
-CONFIG_MALI_PLATFORM_THIRDPARTY=y
-CONFIG_MALI_PLATFORM_THIRDPARTY_NAME="rk"
-CONFIG_MALI_DEBUG=y
 CONFIG_MALI_PWRSOFT_765=y
 CONFIG_MALI_BIFROST=y
 CONFIG_MALI_BIFROST_DEVFREQ=y
@@ -861,11 +834,9 @@ CONFIG_ARM_ROCKCHIP_DMC_DEVFREQ=y
 CONFIG_ARM_ROCKCHIP_DMC_DEBUG=y
 CONFIG_DEVFREQ_EVENT_ROCKCHIP_NOCP=y
 CONFIG_IIO=y
-CONFIG_IIO_BUFFER=y
 CONFIG_IIO_BUFFER_CB=y
-CONFIG_IIO_KFIFO_BUF=y
-CONFIG_IIO_TRIGGER=y
 CONFIG_ROCKCHIP_SARADC=y
+CONFIG_INV_MPU6050_I2C=y
 CONFIG_PWM=y
 CONFIG_PWM_ROCKCHIP=y
 CONFIG_PHY_ROCKCHIP_CSI2_DPHY=y
@@ -883,6 +854,7 @@ CONFIG_PHY_ROCKCHIP_TYPEC=y
 CONFIG_PHY_ROCKCHIP_USB=y
 CONFIG_ANDROID=y
 CONFIG_ANDROID_BINDER_IPC=y
+CONFIG_ANDROID_BINDERFS=y
 CONFIG_ROCKCHIP_EFUSE=y
 CONFIG_ROCKCHIP_OTP=y
 CONFIG_TEE=y
@@ -914,20 +886,16 @@ CONFIG_MSDOS_FS=y
 CONFIG_VFAT_FS=y
 CONFIG_TMPFS=y
 CONFIG_TMPFS_POSIX_ACL=y
-CONFIG_SDCARD_FS=y
 CONFIG_PSTORE=y
 CONFIG_PSTORE_CONSOLE=y
 CONFIG_PSTORE_PMSG=y
 CONFIG_PSTORE_RAM=y
-CONFIG_CIFS=y
-CONFIG_CIFS_XATTR=y
-CONFIG_CIFS_POSIX=y
-# CONFIG_CIFS_DEBUG is not set
 CONFIG_NLS_CODEPAGE_437=y
 CONFIG_NLS_ASCII=y
 CONFIG_NLS_ISO8859_1=y
 CONFIG_NLS_UTF8=y
 CONFIG_UNICODE=y
+CONFIG_UNICODE_NORMALIZATION_SELFTEST=y
 CONFIG_SECURITY_PERF_EVENTS_RESTRICT=y
 CONFIG_SECURITY=y
 CONFIG_SECURITY_NETWORK=y
diff --git a/drivers/input/sensors/compass/Kconfig b/drivers/input/sensors/compass/Kconfig
index 91a19ffe23ea..41bdf1f95c4e 100644
--- a/drivers/input/sensors/compass/Kconfig
+++ b/drivers/input/sensors/compass/Kconfig
@@ -47,7 +47,7 @@ config COMPASS_AK09911
   will be called AK09911.
 
 config COMPASS_AK09918
-  tristate "Asahi Kasei AK09911 3-Axis Magnetometer"
+  tristate "Asahi Kasei AK09918 3-Axis Magnetometer"
   depends on I2C
   help
   Say yes here to build support for Asahi Kasei AK09918 3-Axis Magnetometer.
-- 
2.17.1

